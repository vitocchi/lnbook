<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="generator" content="Asciidoctor 2.0.16" />
<title>ライトニングネットワークのセキュリティとプライバシー</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700" />
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="security_and_privacy"><span class="keep-together">ライトニングネットワークの</span>セキュリティとプライバシー</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この章では、ライトニング・ネットワークのセキュリティとプライバシーに関する最も重要な問題について見ていきます。まず、プライバシーについて、その意味、評価方法、およびライトニングネットワークの使用中に自分のプライバシーを保護するためにできることを検討します。次に、一般的な攻撃とその緩和策について説明します。</p>
</div>
<div class="sect2">
<h3 id="_why_is_privacy_important">なぜプライバシーが重要なのか？</h3>
<div class="paragraph">
<p>暗号通貨の重要な価値提案は、検閲に強いお金です。ビットコインは、政府、銀行、企業の干渉を受けずに、参加者の富を保存し、移転する可能性を提供します。ライトニング・ネットワークはこの使命を引き継いでいます。</p>
</div>
<div class="paragraph">
<p>カストディアル・ビットコイン・バンクのような些細なスケーリング・ソリューションとは異なり、ライトニング・ネットワークはセルフ・カストディに妥協することなくビットコインのスケーリングを目指し、ビットコインのエコシステムにおける検閲への耐性を高めるはずである。しかし、ライトニングネットワークは異なるセキュリティモデルの下で運営されており、セキュリティとプライバシーに関する新たな課題が発生します。</p>
</div>
</div>
<div class="sect2">
<h3 id="_definitions_of_privacy">プライバシーに関する定義</h3>
<div class="paragraph">
<p>ライトニングはプライベートか」という問いに、直接的な答えはありません。プライバシーは複雑なトピックであり、特にプライバシー研究者でない場合、プライバシーが意味するものを正確に定義することは困難な場合があります。幸いなことに、プライバシー研究者は、システムのプライバシー特性を分析・評価するためにプロセスを使用しています。ここでは、セキュリティ研究者が「ライトニングはプライベートか」という問いにどのように答えようとするのか、一般的な2つのステップで見ていきましょう。</p>
</div>
<div class="paragraph">
<p>まず、プライバシー研究者は、敵対者がどのような能力を持ち、何を目指しているのかを規定した<em>セキュリティ</em>モデルを定義します。
次に、システムの関連する特性を記述し、それが要件に適合しているかどうかをチェックする。</p>
</div>
</div>
<div class="sect2">
<h3 id="_process_to_evaluate_privacy">プライバシーを評価するプロセス</h3>
<div class="paragraph">
<p>セキュリティモデルは、一連の<em>セキュリティの</em>基礎となる<em>仮定に</em>基づく。
暗号システムでは、これらの仮定は、暗号、署名、ハッシュ関数などの暗号プリミティブの数学的特性を中心としたものであることが多い。
ライトニング・ネットワークでは、プロトコルで使用されるECDSA署名、SHA-256ハッシュ関数などの暗号関数が、そのセキュリティ定義内で動作することをセキュリティ上の前提条件としています。
例えば、ハッシュ関数の前像（および第二前像）を見つけることは実質的に不可能であると仮定しています。
これにより、ライトニング・ネットワークは、マルチホップ決済の原子性をHTLCメカニズム（ハッシュ関数の前像の利用）に依存することができ、最終受信者以外の誰も決済秘密を明らかにできず、HTLCを解決することができます。
また、ネットワークにある程度の接続性があること、つまりライトニングチャンネルが連結グラフを形成していることを想定しています。したがって、任意の送信者から任意の受信者への経路を見つけることが可能です。最後に、ネットワークメッセージは一定のタイムアウト内に伝搬されると仮定します。</p>
</div>
<div class="paragraph">
<p>さて、いくつかの前提条件を確認したところで、想定される敵について考えてみましょう。</p>
</div>
<div class="paragraph">
<p>ライトニング・ネットワークで考えられる敵対者のモデルをいくつか紹介します。
正直だが好奇心旺盛な」転送ノードは、支払い金額、直前と直後のノード、および発表されたチャネルのグラフとその容量を観察することができます。
非常によく接続されたノードも同じことができますが、より大きな範囲になります。
例えば、人気のある財布の開発者が、ユーザーがデフォルトで接続するノードを維持することを考えてみましょう。
このノードは、そのウォレットのユーザーとの間で行われる支払いの大部分をルーティングする役割を担っています。
複数のノードが敵対的に制御されている場合はどうなるのか？
2 つの共謀したノードが偶然同じ支払い経路にいた場合、HTLC は同じ支払いハッシュを持っているので、同じ支払いに属する HTLC を転送していることを理解することができる。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">備考</div>
</td>
<td class="content">
<div class="paragraph">
<p>マルチパートペイメント(<a href="#mpp">[mpp]</a>を参照)は、ユーザーが不均一な分割サイズから支払い金額を難解にすることを可能にする。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>ライトニング攻撃者の目的は何でしょうか？
情報セキュリティは、しばしば、機密性、完全性、可用性の3つの主要な特性という観点から説明されます。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">守秘義務</dt>
<dd>
<p>情報は意図した相手にしか届きません。</p>
</dd>
<dt class="hdlist1">誠実さ</dt>
<dd>
<p>転送中に情報が変化することはありません。</p>
</dd>
<dt class="hdlist1">可用性</dt>
<dd>
<p>ほとんど機能している。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>ライトニング・ネットワークの重要な特性は、主に機密性と可用性が中心となっています。守るべき重要な特性には、以下のようなものがあります。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>送金者と受取人のみが支払額を知ることができます。</p>
</li>
<li>
<p>誰も送り手と受け手を結びつけることはできない。</p>
</li>
<li>
<p>誠実なユーザーは、支払いの送受信をブロックされることはありません。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>それぞれのプライバシー目標とセキュリティモデルに対して、攻撃者が成功する一定の確率が存在する。
この確率は、ネットワークの規模や構造など、さまざまな要因に依存する。
他の条件が同じであれば、一般に、大規模なネットワークよりも小規模なネットワークの方が攻撃を成功させやすい。
同様に、ネットワークが中央集権的であればあるほど、「中央」のノードが制御下にあれば、攻撃者はより高い能力を発揮することができます。
もちろん、セキュリティモデルを構築するためには、中央集権という言葉を正確に定義する必要があり、ネットワークがどの程度中央集権的であるかについては、多くの定義が考えられます。
最後に、決済ネットワークであるライトニング・ネットワークは、経済的な刺激に依存しています。
手数料のサイズと構造はルーティングアルゴリズムに影響を与えるため、ほとんどの支払いを自分のノード経由で転送することで攻撃者を助けることも、そうならないようにすることもできる。</p>
</div>
</div>
<div class="sect2">
<h3 id="_anonymity_set">アノニマスセット</h3>
<div class="paragraph">
<p>匿名化解除とはどういう意味ですか？
簡単に言えば、非匿名化とは、ある行為と、その人の名前や住所など現実世界のアイデンティティを結びつけることを意味します。
プライバシー研究において、非匿名化という概念はより微妙なものです。
第一に、私たちは必ずしも名前や住所について話しているわけではありません。
誰かのIPアドレスや電話番号を発見することも、非匿名化とみなされる可能性があります。
ユーザーの行動と過去の行動を結びつけることができる情報の断片は、<em>アイデンティティと</em>呼ばれる。
第二に、非匿名化は二元的なものではなく、ユーザーは完全に匿名化されるわけでも、完全に非匿名化されるわけでもない。
その代わり、プライバシー研究では、匿名性セットと比較した匿名性に注目する。</p>
</div>
<div class="paragraph">
<p><em>匿名集合は</em>、プライバシー研究の中心的な概念である。
これは、攻撃者の視点から見て、ある行動がその集合の中の誰にでも対応できるようなIDの集合を指す。
実際の例で考えてみましょう。
あなたが街で人に出会ったとする。
あなたから見て、その人の匿名性の集合はどのようなものでしょうか。
もしあなたがその人を個人的に知っておらず、何の追加情報もない場合、その人の匿名集合は旅行者を含む街の人口とほぼ同じになる。
さらに外見を考慮すれば、その人の年齢をおおよそ推定することができ、明らかにその人よりも年上か年下の都市住民を匿名集合から除外することができるかもしれません。
さらに、その人が電子バッジを使ってX社のオフィスに入ってきたことに気づけば、匿名集合はX<span class="keep-together">社の</span>社員と訪問者の数に絞られる。
最後に、彼らがその場所に到着するために使用した車のナンバーに気づくかもしれません。
あなたがカジュアルなオブザーバーであれば、これはあまり情報を与えません。
しかし、もしあなたが市の職員で、ナンバープレートと名前を照合するデータベースにアクセスできるのであれば、車の所有者と、その車を借りたかもしれない親しい友人や親戚の数人にまで匿名性のセットを絞り込むことができます。</p>
</div>
<div class="paragraph">
<p>この例は、いくつかの重要なポイントを示している。
第一に、あらゆる情報が敵の目標に近づく可能性がある。
匿名性セットを1つのサイズに縮小する必要がない場合もあります。
例えば、敵対者が標的型サービス妨害（DoS）攻撃を計画しており、100台のサーバーをダウンさせることができる場合、匿名性セットは100で十分となります。
第二に、敵は異なるソースからの情報を相互に関連付けることができる。
プライバシーリークが比較的良性に見えても、他のデータソースと組み合わせることで何を実現できるかは分かりません。
最後に、特に暗号の世界では、攻撃者は常にブルートフォースサーチという "最後の手段 "を持っています。
暗号のプリミティブは、秘密鍵のような秘密を推測することが事実上不可能なように設計されています。
しかし、情報を得るたびに、攻撃者はこの目標に近づき、ある時点で達成可能になる。</p>
</div>
<div class="paragraph">
<p>ライトニングの観点では、匿名化解除とは、一般に、支払いとノードIDで識別されるユーザーとの対応関係を導き出すことを意味する。
各ペイメントには、送信者匿名性セットと受信者匿名性セットを割り当てることができます。
理想的には、匿名性セットはネットワークのすべてのユーザーから構成される。
これにより、攻撃者は一切の情報を持たないことが保証される。
しかし、実際のネットワークでは、攻撃者が検索を絞り込めるような情報が漏れている。
匿名性集合が小さいほど、匿名化解除に成功する確率は高くなる。</p>
</div>
</div>
<div class="sect2 pagebreak-before less_space">
<h3 id="_differences_between_the_lightning_network_and_bitcoin_in_terms_of_privacy">ライトニングネットワークとビットコインのプライバシーに関する違いについて</h3>
<div class="paragraph">
<p>ビットコインネットワーク上の取引は、現実世界のアイデンティティとビットコインアドレスを関連付けないことは事実ですが、すべての取引は平文で放送され、分析することが可能です。
ビットコインや他の暗号通貨のユーザーの匿名化を解除するために、複数の企業が設立されています。</p>
</div>
<div class="paragraph">
<p>ライトニングの支払いはネットワーク全体にブロードキャストされないため、一見したところ、ライトニングはビットコインよりも優れたプライバシーを提供します。
これはプライバシーのベースラインを向上させるが、ライトニングプロトコルの他の特性は、匿名の支払いをより困難にする可能性がある。
例えば、大規模な決済では、ルーティングの選択肢が少なくなる可能性があります。
このため、資本力のあるノードを支配する敵対者は、ほとんどの大きな支払いをルーティングし、支払い金額やおそらくその他の詳細を発見することができるかもしれません。ライトニングネットワークが成長するにつれて、この問題は小さくなる可能性があります。</p>
</div>
<div class="paragraph">
<p>ライトニングとビットコインのもう一つの違いは、ライトニングのノードが恒久的なアイデンティティを保持しているのに対し、ビットコインのノードはそうではないことです。
洗練されたビットコインのユーザーは、ブロックチェーンのデータを受信し、トランザクションをブロードキャストするために使用するノードを簡単に切り替えることができます。
これに対し、ライトニングのユーザーは、支払いチャネルを開くために使用したノードを介して支払いを送受信します。
さらに、ライトニングプロトコルでは、ルーティングノードがノードIDに加えてIPアドレスを発表することを前提としています。
これにより、ノード ID と IP アドレスの間に恒久的なリンクが作成されます。IP アドレスは、ユーザーの物理的な場所や、ほとんどの場合、実世界のアイデンティティにリンクする匿名性攻撃の中間ステップであることが多いことを考えると、これは危険であると考えられます。
Lightning over Torを使用することは可能ですが、<a href="https://1ml.com/statistics">ノード発表から収集された統計から</a>わかるように、多くのノードがこの機能を使用していません。</p>
</div>
<div class="paragraph">
<p>ライトニング・ユーザーは、支払いを送信する際、その匿名性セットに近隣のノードを持つ。
具体的には、ルーティングノードは、直前のノードと直後のノードしか知らない。
ルーティングノードは、支払いルートにおける直前の隣接ノードが最終的な送信者であるか受信者であるかは知らない。
したがって、ライトニングにおけるノードの匿名性集合は、その隣人にほぼ等しい（<a href="#anonymity_set">アリスとボブの匿名性集合は隣人を構成するを</a>参照）。</p>
</div>
<div id="anonymity_set" class="imageblock">
<div class="content">
<img src="images/mtln_1601.png" alt="The anonymity set of Alice and Bob constitutes their neighbors" />
</div>
<div class="title">図1.アリスとボブの匿名集合は、その隣人を構成する</div>
</div>
<div class="paragraph">
<p>同様の論理は、決済の受け手にも当てはまります。
多くのユーザーは、ほんの一握りの決済チャネルしか開いていないため、匿名性のセットは制限されます。
さらに、Lightningでは、匿名性セットは静的であるか、少なくともゆっくりと変化しています。
これに対して、オンチェーンCoinJoin取引では、かなり大きな匿名性セットを実現することができます。
匿名性セットが50を超えるCoinJoinトランザクションは、かなり頻繁に発生しています。
通常、CoinJoinトランザクションの匿名性セットは、動的に変化するユーザーの集合に対応する。</p>
</div>
<div class="paragraph">
<p>最後に、ライトニング・ユーザは、攻撃者によってチャネルをブロックされたり、枯渇させられたりして、サービスを拒否されることもあります。
支払いの転送には、希少資源である資本が必要であり、経路上のHTLCで一時的にブロックされます。
攻撃者は、多くの支払いを送信するものの、それを確定することができず、誠実なユーザーの資本を長期間にわたって占有してしまう可能性があります。
この攻撃ベクトルは、ビットコインには存在しない（または少なくともそれほど明白ではない）。</p>
</div>
<div class="paragraph">
<p>まとめると、ライトニングネットワークのアーキテクチャには、ビットコインと比較してプライバシー面で一歩前進していると思われる部分がある一方で、プロトコルの他の特性によってプライバシーへの攻撃が容易になる可能性がある。ライトニング・ネットワークがどのようなプライバシー保証を提供しているかを評価し、状態を改善するための徹底的な研究が必要である。</p>
</div>
<div class="paragraph">
<p>本編で取り上げた課題は、2021年半ばに利用可能な研究をまとめたものである。しかし、この研究開発領域は急速に成長しています。筆者らは、現在ライトニング・プライバシーに取り組んでいる複数の研究チームを知っていることをご報告します。</p>
</div>
<div class="paragraph">
<p>ここで、学術文献に記載されているLNプライバシーに対する攻撃のいくつかを確認しておこう。</p>
</div>
</div>
<div class="sect2">
<h3 id="_attacks_on_lightning">ライトニングへの攻撃</h3>
<div class="paragraph">
<p>最近の研究では、ライトニング・ネットワークのセキュリティとプライバシーが侵害される可能性がある様々な方法が説明されています。</p>
</div>
<div class="sect3">
<h4 id="_observing_payment_amounts">支払額の把握</h4>
<div class="paragraph">
<p>プライバシーを保護する決済システムの目標の1つは、支払い金額を関係ない人から隠すことです。
ライトニング・ネットワークは、この点でレイヤー1より改善されている。
ビットコインの取引は平文でブロードキャストされ、誰でも観察することができるが、ライトニングの支払いは、支払い経路に沿った数個のノードしか通過しない。
しかし、中間ノードには支払額が表示されますが、この支払額は実際の支払総額と一致しない場合があります（<a href="#mpp">[mpp]</a>を参照）。
これは、各ホップで新しいHTLCを作成するために必要である。
仲介ノードが支払額を利用できることは、直接的な脅威にはならない。
しかし、<em>正直だが好奇心旺盛な</em>仲介ノードが、より大きな攻撃の一部としてそれを使用する可能性がある。</p>
</div>
</div>
<div class="sect3">
<h4 id="_linking_senders_and_receivers">送り手と受け手のリンク</h4>
<div class="paragraph">
<p>攻撃者は、ある経済関係を明らかにするために、支払いの送り手および/または受け手を知ることに興味を持つかもしれない。
このプライバシーの侵害は、仲介ノードが特定の受信者または送信者へのまたは送信者からの支払いを検閲する可能性があるため、検閲への耐性を損なう可能性があります。
理想的には、送信者と受信者のリンクは、送信者と受信者以外には不可能であるべきです。</p>
</div>
<div class="paragraph">
<p>以下のセクションでは、オフパス敵対者とオンパス敵対者という 2 種類の敵対者を考 察する。
オフパスの敵対者は、支払のルーティングプロセスに参加せずに、支払の送信者と受信者を評価しようとする。
オンパスの敵対者は、関心のある支払いをルーティングすることで得られる可能性のあるあらゆる情報を活用することができる。</p>
</div>
<div class="paragraph">
<p>まず、<em>オフパスの敵対者</em>について考える。
この攻撃シナリオの最初のステップでは、強力なオフパスの敵がプロービング（後続のセクションで説明）により各支払いチャネルの個々の残高を推測し、時間<em>t1</em> でネットワークのスナップショットを形成します。簡単のために、<em>t1</em>を 12:05 とします。
その後、時刻<em>t2を</em>12:10として、再びネットワークをプローブします。攻撃者は、12時10分と12時5分のスナップショットを比較し、2つのスナップショットの違いを利用して、変更されたパスを調べることで、行われた支払いに関する情報を推測することができます。
最も単純なケースでは、12時10分から12時5分の間に1回だけ支払いが行われた場合、敵は残高が同じ金額だけ変化している1つのパスを観察することになります。
したがって、敵対者はこの支払いについて、送信者、受信者、および金額というほとんどすべての情報を知ることができる。
複数の支払い経路が重なる場合、敵対者はヒューリスティックを適用して、その重なりを識別し、支払いを分離する必要があります。</p>
</div>
<div class="paragraph">
<p>さて、ここで<em>オンパスの敵</em>に目を向けてみよう。
このような敵対者は複雑に見えるかもしれません。
しかし、2020年6月、研究者は、単一の最も中心的なノードが<a href="https://arxiv.org/pdf/2006.12143.pdf">全LN決済の50％近くを観測</a>し、4つの最も中心的なノードが<a href="https://arxiv.org/pdf/1909.06890.pdf">平均72％の決済を観測</a>したことに注目しました。
これらの結果は、オンパスアタッカーモデルの関連性を強調するものです。
支払い経路の仲介者は自分の後継者と前任者しか知らないにもかかわらず、悪意のある仲介者や正直だが好奇心の強い仲介者が送り手と受け手を推測するために利用できるリーク情報がいくつかあるのです。</p>
</div>
<div class="paragraph">
<p>オンパスの敵対者は、タイムロックの差分だけでなく、ルーティングされた支払額も観察できる(<a href="#onion_routing">[onion_routing]</a>を参照)。
したがって、敵対者は送信者または受信者の匿名セットから、ルーティングされた金額よりも低い容量を持つ任意のノードを除外することができる。
したがって、プライバシーと支払額の間にトレードオフがあることが観察される。
一般的に、支払い金額が大きくなるほど、匿名性セットは小さくなります。
この漏洩は、マルチパート決済や大容量の決済チャネルで最小化できる可能性があることに留意されたい。
同様に、タイムロックデルタが小さい決済チャネルは、決済経路から除外することができる。
より正確には、支払いがロックされる可能性のある残り時間が、転送ノードが受け入れようとする時間よりも大きい場合、支払いチャネルは支払いに関連することができない。
この漏洩は、いわゆるシャドウルートを遵守することで回避できる可能性がある。</p>
</div>
<div class="paragraph">
<p>オンパス敵対者が育成できる最も微妙で強力なリークの1つは、タイミング分析である。
オンパスの敵は、ノードが HTLC リクエストに応答するのにかかる時間と共に、すべてのルーティングされた支払いのログを保持することができます。
攻撃を開始する前に、攻撃者はライトニングネットワークの各ノードにリクエストを送ることで、そのノードの遅延特性を知ることができます。
当然、これは支払い経路における敵対者の正確な位置を確立するのに役立ちます。
さらに、最近示されたように、攻撃者は、時間ベースの推定量を使用して、可能性のある送信者と受信者のセットから支払いの送信者と受信者を決定することに成功することができます。</p>
</div>
<div class="paragraph">
<p>最後に、匿名化解除の試みを支援する未知または未調査のリークが存在する可能性があることを認識することが重要です。例えば、ライトニングウォレットによって異なるルーティングアルゴリズムが適用されるため、適用されるルーティングアルゴリズムを知るだけでも、特定のノードを支払いの送信者および/または受信者から除外するのに役立つ可能性があります。</p>
</div>
</div>
<div class="sect3">
<h4 id="_revealing_channel_balances_probing">チャンネルバランスの解明（プロービング）</h4>
<div class="paragraph">
<p>ライトニングチャネルの残高は、プライバシーと効率性の理由から隠蔽されることが想定されています。
ライトニングノードは、隣接するチャネルの残高のみを知っています。
このプロトコルでは、リモートチャネルの残高を問い合わせる標準的な方法は提供されていません。</p>
</div>
<div class="paragraph">
<p>しかし、攻撃者は<em>プロービング攻撃で</em>リモートチャネルのバランスを明らかにすることができます。
情報セキュリティにおいて、プロービングとは、標的となるシステムにリクエストを送り、受信したレスポンスに基づいてそのプライベートな状態について結論を出す手法を指す。</p>
</div>
<div class="paragraph">
<p>ライトニングチャネルはプローブされやすい。
標準的なLightningの支払いは、受信者がランダムな支払い秘密を作成し、そのハッシュを送信者に送信することから始まることを思い出してください。
中間ノードでは、すべてのハッシュがランダムに見えることに注意してください。
ハッシュが本当の秘密に対応するのか、それともランダムに生成されたものなのかを見分ける方法はない。</p>
</div>
<div class="paragraph">
<p>プロービング攻撃は次のように進行する。
攻撃者マロリーが、アリスとボブの間の公開チャネルのアリスの残高を明らかにしたいとする。
そのチャネルの総容量が100万サトシであるとする。
アリスの残高は0から100万サトシまである(正確には、チャネル予備により見積もりは少し厳しくなるが、ここでは簡略化のため考慮しない)。
マロリーは100万サトシでアリスとのチャネルを開き、アリス経由でボブに50万サトシを<em>乱数を</em>支払いハッシュとして送ります。
もちろん、この数字は既知の支払いの秘密とは一致しない。
したがって、支払いは失敗する。
問題は、具体的にどのように失敗するのか、ということである。</p>
</div>
<div class="paragraph">
<p>2つのシナリオがある。
アリスがボブへのチャンネルの自分側に50万サトシ以上を持っている場合、アリスは支払いを転送する。
ボブは支払いタマネギを解読し、その支払いが自分向けであることに気付く。
彼は、支払い秘密のローカルストアを検索し、支払いハッシュに対応するプリ画像を探すが、見つからなかった。
プロトコルに従って、ボブは「支払いハッシュが不明」というエラーをアリスに返し、アリスはそれをマロリーに中継する。
その結果、Malloryは、支払いハッシュが本物であれば、支払いが<em>成功した可能性が</em>あることを知る。
したがって、マロリーはアリスの残高を "ゼロから100万の間" から "50万から100万の間" に更新することができる。
もう一つのシナリオは、アリスの残高が50万サトシより低い場合に起こります。
この場合、アリスは支払いを転送することができず、"残高不足 "のエラーをMalloryに返します。
マロリーは自分の見積もりを "0と100万の間 "から "0と50万の間 "に更新しました。</p>
</div>
<div class="paragraph">
<p>いずれにせよ、1回のプローブ計測でマロリーの推定精度は2倍になることに注意しよう。
彼女はプロービングを続け、現在の推定間隔を半分にするような次のプロービング量を選択することができる。
このよく知られた探索手法は<em>バイナリサーチと</em>呼ばれる。
バイナリサーチでは、プロービングの回数は求める精度に対して<em>対数</em>である。
例えば、100万サトシのチャンネルでアリスの残高を1サトシまで得るには、マロリーはlog2 (1,000,000) ≒ 20回のプロービングを行うだけでよい。
1回のプロービングに3秒かかるとすると、1チャンネルを1分程度で正確にプロービングすることができるのです。</p>
</div>
<div class="paragraph">
<p>チャンネル・プロービングは、さらに効率的に行うことができます。
最も単純な方法では、Malloryはプローブしたいチャネルに直接接続します。
では、その端点にチャネルを開かずに、チャネルを探索することは可能でしょうか。
マロリーはボブとチャーリーの間のチャネルを調査したいのですが、別のチャネルを開くのは嫌だとします。この場合、オンチェーン料金を支払い、資金取引の確認が必要になります。
代わりにMalloryはAliceとの既存のチャネルを再利用し、Mallory → Alice → Bob → Charlieという経路でプローブを送信する。
マロリーは「支払いハッシュ不明」エラーを前と同じように解釈することができる。プローブが宛先に到達したため、経路上のすべてのチャネルにそれを転送するのに十分な残高がある。
しかし、Malloryが「残高不足」エラーを受け取った場合はどうでしょうか。
アリスとボブの間、あるいはボブとチャーリーの間で残高が不足していることを意味するのでしょうか？</p>
</div>
<div class="paragraph">
<p>現在のLightningプロトコルでは、エラーメッセージは<em>どの</em>エラーが発生したかだけでなく、<em>どこで</em>エラーが発生したかも報告します。
そのため、エラー処理をより慎重に行うことで、マロリーはどのチャンネルでエラーが発生したかを知ることができます。
もし、そのチャネルがターゲットチャネルであれば、推定値を更新し、そうでなければ、ターゲットチャネルへの別の経路を選択する。
さらに、ターゲットチャネルに加えて、中間チャネルの残高に関する<em>追加</em>情報も得ることができます。</p>
</div>
<div class="paragraph">
<p>プロービング攻撃はさらに、前節で説明したように、送信者と受信者のリンクに使用することができます。</p>
</div>
<div class="paragraph">
<p>このとき、「なぜライトニング・ネットワークは、ユーザーの個人情報の保護にこれほどまでにお粗末な仕事をしているのだろう？
なぜ支払いが失敗したのか、どこで失敗したのかを送信者に明かさない方が良いのではないか？
確かに、これは可能性のある対策ではあるが、大きな欠点がある。
ライトニングは、プライバシーと効率性のバランスを慎重にとらなければなりません。
通常のノードは、リモートチャネルでの残高分布を知らないことを忘れないでください。
そのため、中間ホップでの残高不足が原因で、支払いが失敗することがあります（しばしばあります）。
エラーメッセージにより、送信者は別の経路を構築する際に、失敗したチャネルを考慮から除外することができます。
ある有名なLightningウォレットは、構築されたルートが本当に支払いを処理できるかどうか、内部でプロービングを実行することさえあります。</p>
</div>
<div class="paragraph">
<p>チャネルプロービングに対する対策は他にも考えられる。
第一に、攻撃者が予告されていないチャネルをターゲットにすることは困難です。
第二に、ジャストインタイム（JIT）ルーティングを実装しているノードは、攻撃を受けにくいかもしれません。
最後に、マルチパートペイメントによって容量不足の問題が深刻でなくなるため、プロトコル開発者は効率を損なわずにエラーの詳細の一部を隠すことを検討することができる。</p>
</div>
</div>
<div class="sect3">
<h4 id="denial_of_service">サービス拒否</h4>
<div class="paragraph">
<p>リソースが公開されている場合、攻撃者がサービス拒否（DoS）攻撃を行い、リソースを利用できないようにしようとするリスクがある。
一般に、この攻撃は、攻撃者が正規のクエリーと区別のつかないリクエストをリソースに浴びせることで実現される。
この攻撃は、サービスが停止することによる機会損失を除けば、ターゲットが金銭的損失を被ることはほとんどなく、単にターゲットを怒らせることが目的である。</p>
</div>
<div class="paragraph">
<p>DoS攻撃の典型的な緩和策は、正規のユーザーと悪意のあるユーザーを分離するた めに、リクエストの認証を必要とする。これらの対策は、一般ユーザーにとっては些細なコストでしかありませんが、攻撃者が大規模なリクエストを行う際の十分な抑止力として機能します。
サービス拒否対策は、インターネット上のあらゆる場所で見ることができます。ウェブサイトは、1人のユーザーがサーバーの注意をすべて消費することがないようにレート制限を適用し、映画のレビューサイトは、怒ったr/prequelmemes（Redditグループ）メンバーを抑えるためにログイン認証を必要とし、データサービスはクエリの数を制限するためにAPIキーを販売します。</p>
</div>
<div class="sect4">
<h5 id="_dos_in_bitcoin">ビットコインでDoS</h5>
<div class="paragraph">
<p>ビットコインでは、ノードがトランザクションを中継するために使用する帯域幅と、ノードがメンプールという形でネットワークに利用するスペースは、一般に利用可能なリソースです。
ネットワーク上のどのノードも、有効なトランザクションを送信することで帯域幅とメンプールスペースを消費することができます。
この取引が有効なブロックで採掘された場合、ノードには取引手数料が発生し、これらの共有ネットワーク資源を使用するコストが加算される。</p>
</div>
<div class="paragraph">
<p>過去にビットコインネットワークは、攻撃者が低手数料の取引をネットワークにスパム送信するDoS攻撃未遂に直面したことがあります。
これらの取引の多くは、取引手数料が低いためにマイナーに選択されず、攻撃者は手数料を支払うことなくネットワークリソースを消費することができました。
この問題に対処するため、ノードがトランザクションを伝播するのに必要な閾値料金を設定した最低トランザクション中継料が設定された。
この措置により、ネットワークリソースを消費するトランザクションは、最終的にチェーンフィーを支払うことがほぼ確実となりました。
最低中継料は一般ユーザーには受け入れられるが、攻撃者がネットワークにスパムを仕掛けようとすれば金銭的な痛手を負うことになる。
手数料の高い環境では有効なブロックにならない取引もあるかもしれないが、こうした措置はこの種のスパムを抑止する上で概ね有効であった。</p>
</div>
</div>
<div class="sect4">
<h5 id="_dos_in_lightning">LightningにおけるDoS</h5>
<div class="paragraph">
<p>ビットコインと同様に、ライトニングネットワークはパブリックリソースの使用料を徴収していますが、この場合、リソースはパブリックチャネルであり、使用料はルーティングフィーという形で提供されます。
手数料と引き換えにノードを経由して支払いを行うことができるため、ネットワークには大きなスケーラビリティの利点があり、直接接続されていないノードも取引を行うことができます。</p>
</div>
<div class="paragraph">
<p>Lightningノードがお客様に代わって支払いを転送すると、データおよび支払い帯域幅を使用してコミットメントトランザクションを更新し、支払い額は決済または失敗するまでそのチャネルバランスに予約されます。
決済が成功した場合、ノードには最終的に手数料が支払われるため、これは許容範囲内です。
失敗した支払いでは、現在のプロトコルでは手数料が発生しない。
このため、ノードは失敗した支払いをコストなしに任意のチャネルにルーティングすることができます。
これは、失敗した支払いにお金を払いたくない正規のユーザーにとってはありがたいことだが、攻撃者にとってはノードのリソースをコストなしに消費することが可能になる。</p>
</div>
<div class="paragraph">
<p>本稿執筆時点では、lightning-devメーリングリストにおいて、この問題への最適な対処方法について議論が<a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-June/002734.html">行われて</a>います。</p>
</div>
</div>
<div class="sect4">
<h5 id="_known_dos_attacks">既知のDoS攻撃</h5>
<div class="paragraph">
<p>パブリックLNチャネルに対して、ターゲットチャネルまたはターゲットチャネルのセットを使用不能にする2つの既知のDoS攻撃があります。
どちらの攻撃も、パブリックチャネルを通じて支払いをルーティングし、タイムアウトまでそれを保持することで、攻撃の持続時間を最大化します。
悪意のあるノードは単に自分自身への支払いを再ルートすることができるため、手数料を支払わないために支払いを失敗するという要件を満たすことはかなり簡単です。
支払い失敗に対する手数料がない場合、攻撃者が負担する唯一のコストは、これらの支払いを送信するチャネルを開くためのオンチェーンコストであり、これは低手数料環境では些細なことです。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_commitment_jamming">コミットメント・ジャム</h4>
<div class="paragraph">
<p>ライトニングノードは、非対称コミットメントトランザクションを使用して共有状態を更新し、その上で支払いを促進するためにHTLCが追加・削除されます。
各当事者は、一度にコミットメント・トランザクションで合計<a href="https://github.com/lightningnetwork/lightning-rfc/blob/c053ce7afb4cbf88615877a0d5fc7b8dbe2b9ba0/02-peer-protocol.md#the-open_channel-message">483</a>個のHTLCに制限されています。
チャネル妨害攻撃は、攻撃者が483件の支払いをターゲットチャネルにルーティングし、タイムアウトするまで保持することで、チャネルを使用不能にすることを可能にします。</p>
</div>
<div class="paragraph">
<p>この制限は、すべてのHTLCが<a href="https://github.com/lightningnetwork/lightning-rfc/blob/master/05-onchain.md#penalty-transaction-weight-calculation">単一の正義のトランザクションで</a>掃引できることを保証するために仕様で選択されたことに注意する必要があります。
この制限は増加する<em>可能性が</em>ありますが、トランザクションは依然としてブロックサイズによって制限されているため、利用可能なスロットの数は制限されたままであると思われます。</p>
</div>
</div>
<div class="sect3">
<h4 id="_channel_liquidity_lockup">チャンネル流動性ロックアップ</h4>
<div class="paragraph">
<p>チャネル流動性ロックアップ攻撃は、チャネルを通じて支払いをルーティングし、チャネルが使用できないように保持するという点で、チャネル妨害攻撃と同等である。
この攻撃は、チャネルコミットメントのスロットをロックするのではなく、ターゲットチャネルを介して大規模なHTLCをルーティングし、チャネルのすべての利用可能な帯域幅を消費します。
この攻撃の資本コミットメントは、攻撃ノードがターゲットを通して失敗した支払いをルーティングするために多くの資金を必要とするため、コミットメント妨害攻撃よりも高くなります。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cross_layer_de_anonymization">クロスレイヤーデアノニマイゼーション</h3>
<div class="paragraph">
<p>コンピュータ・ネットワークは多くの場合、階層化されています。
レイヤーを重ねることで、関心事を分離し、システム全体を管理しやすくすることができます。
もし、TCP/IPスタックから光ケーブルのビットの物理的エンコーディングまで理解しなければならないのであれば、誰もウェブサイトを設計することはできません。
各レイヤーは、上のレイヤーにきれいな形で機能を提供することになっています。
理想的には、上位のレイヤーは下位のレイヤーをブラックボックスとして認識すべきです。
しかし、現実には理想的な実装がなされておらず、細部が上位<em>層に漏れて</em>しまうことがある。
これが、リーキー・アブストラクションの問題である。</p>
</div>
<div class="paragraph">
<p>ライトニングの文脈では、LNプロトコルはビットコインプロトコルとLN P2Pネットワークに依存する。
ここまでは、ライトニング・ネットワークが提供するプライバシー保証を単独で考えるだけでした。
しかし、支払いチャネルの作成と閉鎖は、本質的にビットコインのブロックチェーン上で実行されます。
したがって、ライトニングネットワークのプライバシー規定を完全に分析するには、ユーザーが相互作用する可能性のある技術スタックのすべてのレイヤーを考慮する必要があります。
特に、匿名化解除を行う敵対者は、オフチェーンおよびオンチェーンデータを使用して、LNノードを対応するビットコインアドレスにクラスタリングまたはリンクすることができますし、今後もそうすることが予想されます。</p>
</div>
<div class="paragraph">
<p>LNユーザの匿名化を解除しようとする攻撃者は、レイヤーをまたいだ文脈で、様々な目標を持つ可能性がある。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>同じユーザーが所有するクラスターBitcoinアドレス（レイヤー1）。これをビットコインエンティティと呼ぶ。</p>
</li>
<li>
<p>同一ユーザーが所有するクラスタLNノード（レイヤー2）。</p>
</li>
<li>
<p>LNノードのセットと、それを制御するBitcoinエンティティのセットを一義的にリンクします。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>敵が同じLNユーザーが所有するBitcoinアドレスとLNノードをクラスタリングすることを可能にするいくつかのヒューリスティックと使用パターンが存在します。
さらに、これらのクラスタは、他の強力なクロスレイヤーリンクのヒューリスティックを使用して、レイヤーを越えてリンクさせることができます。
最後のタイプのヒューリスティック、クロスレイヤーリンク技術は、プライバシーの全体的なビューの必要性を強調するものです。具体的には、両方のレイヤーを一緒にした文脈でプライバシーを考慮する必要がある。</p>
</div>
<div class="sect3">
<h4 id="_on_chain_bitcoin_entity_clustering">オンチェーン・ビットコイン・エンティティ・クラスタリング</h4>
<div class="paragraph">
<p>ライトニングネットワークのブロックチェーンでのやり取りは、ビットコインのエンティティグラフに永続的に反映されます。
チャンネルが閉じられたとしても、攻撃者はどのアドレスがチャンネルに資金を提供し、閉じた後にコインがどこに使われたかを観察することができます。
この分析では、4つの別々のエンティティを考えてみましょう。
チャネルを開くと、<em>送金元エンティティから</em>資金<em>調達エンティティへ</em>、チャネルを閉じると、<em>決済エンティティから</em>送金<em>先</em>エンティティへ、それぞれお金の流れが発生します。</p>
</div>
<div class="paragraph">
<p>2021年初頭、<a href="https://arxiv.org/pdf/2007.00764.pdf">Romiti</a>らは、これらのエンティティのクラスタリングを可能にする4つのヒューリスティックを特定した。
そのうち2つは特定のリーキーファンディング行動を捉え、2つはリーキーな決済行動を記述している。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">スターヒュリスティック（資金調達）</dt>
<dd>
<p>あるコンポーネントが、1つまたは複数の資金調達エンティティに資金を転送する1つのソースエンティティを含む場合、これらの資金調達エンティティは同じユーザーによって制御されている可能性があります。</p>
</dd>
<dt class="hdlist1">スネーク・ヒューリスティック（資金調達）</dt>
<dd>
<p>あるコンポーネントが1つのソースエンティティを含み、それが1つ以上のエンティティに資金を転送し、そのエンティティ自体がソースおよび資金エンティティとして使用されている場合、これらすべてのエンティティは同じユーザーによって制御されている可能性があります。</p>
</dd>
<dt class="hdlist1">コレクター・ヒューリスティック（和解）</dt>
<dd>
<p>あるコンポーネントが、1つまたは複数の決済エンティティから資金を受け取る1つの宛先エンティティを含む場合、これらの決済エンティティは同じユーザーによって制御されている可能性があります。</p>
</dd>
<dt class="hdlist1">代理人ヒューリスティック（決済）</dt>
<dd>
<p>あるコンポーネントが1つの宛先エンティティを含み、そのエンティティが1つ以上のエンティティから資金を受け取り、そのエンティティ自体が決済および宛先エンティティとして使用されている場合、これらのエンティティは同じユーザーによって制御されている可能性が高い。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>これらのヒューリスティックは誤検出を引き起こす可能性があることを指摘する価値がある。
例えば、複数の無関係なユーザーの取引がCoinJoin取引で結合されている場合、スターヒューリスティックやプロキシューリスティックは誤検出を引き起こす可能性がある。
これは、ユーザーがCoinJoin取引から支払いチャネルに資金を供給している場合に起こり得る。
また、クラスター化したアドレスがサービス（例：取引所）またはユーザーの代理（カストディアンウォレット）によって管理されている場合、エンティティが複数のユーザーを表す可能性があることも、偽陽性の潜在的な原因として考えられる。
しかし、このような誤検出は効果的に除去することができる。</p>
</div>
<div class="sect4">
<h5 id="_countermeasures">対策</h5>
<div class="paragraph">
<p>資金調達取引の出力が他のチャネルを開くために再利用されない場合、蛇のヒューリスティックは機能しない。
もしユーザーが単一の外部ソースからチャネルに資金を供給することを控え、単一の外部宛先エンティティに資金を集めることを避ければ、他のヒューリスティックは大きな結果をもたらさないだろう。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_off_chain_lightning_node_clustering">オフチェーンライトニングノードクラスタリング</h4>
<div class="paragraph">
<p>LNノードは、例えば<em>LNBig.comの</em>ようなエイリアスをアドバタイズします。
エイリアスは，システムの使い勝手を向上させることができます．
しかし、ユーザーは自分自身の異なるノードに類似のエイリアスを使用する傾向があります。
たとえば、<em>LNBig.com Billingは</em>、エイリアス<em>LNBig.comを</em>持つノードと同じユーザーによって所有されている可能性があります。
この観察から、ノードのエイリアスを適用してLNノードをクラスタリングすることができます。
具体的には、文字列の類似性メトリックに関してエイリアスが類似している場合、LNノードを1つのアドレスにクラスタリングすることができる。</p>
</div>
<div class="paragraph">
<p>LNノードをクラスタリングするもう1つの方法は、IPアドレスやTorアドレスを適用することです。
同じIPアドレスやTorアドレスが異なるLNノードに対応する場合、これらのノードは同じユーザーによって制御されている可能性が高い。</p>
</div>
<div class="sect4">
<h5 id="_countermeasures_2">対策</h5>
<div class="paragraph">
<p>よりプライバシーを確保するために、エイリアスは互いに十分に異なるものであるべきです。
ライトニングネットワークに受信チャンネルを持ちたいノードにとってIPアドレスの公開は避けられないかもしれませんが、各ノードのクライアントが異なるサービスプロバイダ、つまりIPアドレスでホストされていれば、同じユーザーのノード間のリンク可能性を緩和することができます。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cross_layer_linking_lightning_nodes_and_bitcoin_entities">クロスレイヤーリンク。ライトニングノードとビットコインエントリ</h4>
<div class="paragraph">
<p>LNノードをビットコインの実体に関連付けることは、プライバシーに対する重大な侵害であり、ほとんどのLNノードがIPアドレスを公に公開しているという事実によって悪化しています。
一般的に、IPアドレスはユーザーの一意の識別子と考えることができます。
広く観察されている2つの行動パターンから、LNノードとBitcoinエンティティの間のリンクが明らかになります。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">コイン再利用</dt>
<dd>
<p>ユーザーが支払いチャネルを閉じるときはいつでも、対応するコインを取り戻します。しかし、多くのユーザーは、新しいチャネルを開くためにそれらのコインを再利用します。
これらのコインは、共通のLNノードに効果的にリンクさせることができます。</p>
</dd>
<dt class="hdlist1">エンティティの再利用</dt>
<dd>
<p>通常、ユーザーは同じビットコイン・エンティティに対応するビットコインアドレスから支払いチャネルに資金を供給します。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>ユーザーが複数のクラスター化されていないアドレスを所有したり、複数のウォレットを使用してライトニング・ネットワークとやり取りする場合、これらのクロスレイヤー・リンク・アルゴリズムは失敗する可能性があります。</p>
</div>
<div class="paragraph">
<p>ビットコインエンティティの非匿名化の可能性は、1つずつではなく、両方のレイヤーのプライバシーを同時に考慮することがいかに重要であるかを示している。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lightning_graph">ライトニンググラフ</h3>
<div class="paragraph">
<p>ライトニングネットワークは、その名が示すように、決済チャネルのピアツーピアネットワークである。
したがって、その特性の多く（プライバシー、堅牢性、接続性、ルーティング効率）は、そのネットワークの性質に影響され、特徴付けられる。</p>
</div>
<div class="paragraph">
<p>このセクションでは、ネットワーク科学の観点からライトニング・ネットワークについて議論し、分析します。
特に、LNチャンネルグラフ、その堅牢性、接続性、その他の重要な特性を理解することに関心があります。</p>
</div>
<div class="sect3">
<h4 id="_how_does_the_lightning_graph_look_in_reality">Lightning Graphの現実の姿とは？</h4>
<div class="paragraph">
<p>ライトニングネットワークは、ノード間にランダムにエッジが形成されるランダムグラフであることが予想されます。
もしそうであれば、ライトニングネットワークの次数分布はガウス型の正規分布に従うことになります。
特に、ほとんどのノードがほぼ同じ次数を持ち、極端に大きな次数を持つノードは期待できない。
これは、正規分布が分布の平均値付近の区間から外れた値に対して指数関数的に減少するためである。
ランダムグラフの描写は（<a href="#lngraph">[lngraph]</a>で見たように）メッシュネットワークのトポロジーのように見えます。
また，非中央集権的で非階層的であり，すべてのノードが等しく重要であるように見えます．
また、ランダムグラフは直径が大きい。
特に、2つのノード間の最短経路が適度に長いため、このようなグラフのルーティングは困難である。</p>
</div>
<div class="paragraph">
<p>しかし、それとは全く対照的に、LNのグラフは全く違うものになっています。</p>
</div>
<div class="sect4">
<h5 id="_lightning_graph_today">本日の電光グラフ</h5>
<div class="paragraph">
<p>ライトニングは金融ネットワークである。
したがって、ネットワークの成長と形成は、経済的なインセンティブにも影響されます。
ノードがライトニングネットワークに参加するたびに、ルーティング効率を高めるために他のノードとの接続性を最大化したいと思うことがあります。このような現象はpreferential attachmentと呼ばれます。
このような経済的インセンティブにより、ランダムなグラフとは根本的に異なるネットワークが形成されます。</p>
</div>
<div class="paragraph">
<p>公開されているチャンネルのスナップショットに基づくと、ライトニングネットワークの次数分布はべき乗関数に従っています。
このようなグラフでは、大半のノードが他のノードとほとんど接続せず、一握りのノードだけが多数の接続を持っています。
このグラフのトポロジーは、高いレベルで星型に似ており、ネットワークは十分に接続されたコアと緩く接続されたペリフェリーを持ちます。
次数分布がべき乗則に従うネットワークは、スケールフリーネットワークとも呼ばれる。
このトポロジーは、支払いを効率的にルーティングするのに有利であるが、特定のトポロジーに基づく攻撃を受けやすい。</p>
</div>
</div>
<div class="sect4">
<h5 id="_topology_based_attacks">トポロジーベース攻撃</h5>
<div class="paragraph">
<p>敵対者はライトニングネットワークを混乱させたいと考え、ネットワーク全体を多くの小さな構成要素に分解し、ネットワーク全体で支払いルーティングを実質的に不可能にすることを目標とするかもしれません。
それほど野心的ではないものの、悪質で厳しい目標は、特定のネットワークノードのみを破壊することかもしれません。
このような破壊は、ノードレベルまたはエッジレベルで発生する可能性があります。</p>
</div>
<div class="paragraph">
<p>敵対者がライトニング・ネットワークの任意のノードをダウンさせることができるとしよう。
例えば、分散型サービス拒否（DDoS）攻撃をしたり、何らかの手段で動作不能にすることができる。
敵がランダムにノードを選ぶ場合、ライトニングネットワークのようなスケールフリーネットワークは、ノード削除攻撃に対して堅牢であることが判明した。
これは、ランダムなノードは接続数の少ない周辺部に存在するため、ネットワークの接続性において無視できる役割を果たすからです。
しかし、敵がより慎重であれば、最もよく接続されているノードをターゲットにすることができます。
当然のことながら、ライトニング・ネットワークや他のスケールフリー・ネットワークは、標的型ノード削除攻撃に対して<em>堅牢ではない</em>。</p>
</div>
<div class="paragraph">
<p>一方、敵はよりステルス的である可能性もある。
トポロジーベースの攻撃の中には、単一のノードまたは単一の決済チャネルを標的とするものがあります。
たとえば、敵対者はある支払いチャネルの容量を意図的に使い果たすことに興味を持つかもしれません。
より一般的には、敵対者はノードの送信容量をすべて枯渇させ、ルーティング市場からノックダウンさせることができます。
これは、各支払いチャネルの発信容量に等しい金額の支払いを被害者ノードにルーティングすることで簡単に実現できます。
このいわゆるノード孤立化攻撃が完了すると、被害ノードは支払いを受け取るかチャネルのバランスを変えない限り、もう支払いを送信したりルーティングしたりすることができなくなります。</p>
</div>
<div class="paragraph">
<p>結論として、設計上でも、ルーティング可能なライトニングネットワークからエッジやノードを削除することは可能である。
しかし、利用する攻撃ベクトルによっては、敵が攻撃を実行するために提供しなければならないリソースが多くなったり少なくなったりする可能性があります。</p>
</div>
</div>
<div class="sect4">
<h5 id="_temporality_of_the_lightning_network">ライトニングネットワークの時間性</h5>
<div class="paragraph">
<p>ライトニング・ネットワークは、動的に変化するパーミッション・レス・ネットワークです。
ノードは自由にネットワークに参加したり離脱したりすることができ、いつでも好きなときに決済チャネルを開いたり作ったりすることができます。
したがって、LNグラフの単一の静的なスナップショットは誤解を招く恐れがあります。我々は、ネットワークの時間的性質と常に変化する性質を考慮する必要がある。今のところ、LNグラフはノード数と決済チャネル数で増加している。
その有効直径も縮小しており、「<a href="#temporal_ln">The steady growth of the Lightning Network in nodes, channels, and locked capacity (as of September 2021)</a>」に見られるように、ノード同士が接近している。</p>
</div>
<div id="temporal_ln" class="imageblock">
<div class="content">
<img src="images/mtln_1602.png" alt="The steady growth of the Lightning Network in terms of nodes, channels, and locked capacity (as of September 2021)" />
</div>
<div class="title">図2.ライトニング・ネットワークのノード、チャネル、ロックされた容量の着実な成長（2021年9月現在）</div>
</div>
<div class="paragraph">
<p>ソーシャルネットワークでは、三角形が閉じる振る舞いがよく見られる。
具体的には、ノードは人、友好関係はエッジとして表現されるグラフにおいて、三角形が出現することはある程度予想されることである。
この場合の三角形は、3人の間のペア的な友好関係を表している。
たとえば、アリスがボブを知っていて、ボブがチャーリーを知っているとしたら、ある時点でボブがアリスをチャーリーに紹介する可能性が高い。
しかし、このような行動はライトニング・ネットワークでは奇妙なことです。
ノードは、新しい支払いチャネルを開く代わりに支払いをルーティングすることができたので、単純に三角形を閉じるインセンティブがない。
意外なことに、ライトニング・ネットワークではトライアングルのクローズは一般的な行為である。
マルチパートペイメントが実装される以前から、トライアングルの数は着実に増えていました。
これは、ノードが第3のチャネルを開く代わりに、三角形の2つの側面を介して支払いをルーティングすることができたことを考えると、直感に反し、驚くべきことです。
これは、ルーティングの非効率性によって、ユーザーが三角形を閉じ、ルーティングに頼らないようにするインセンティブが働いたことを意味するのかもしれません。
マルチパートペイメントが、ペイメントルーティングの有効性を高めるのに役立つことを期待します。</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_centralization_in_the_lightning_network">ライトニングネットワークにおける一元化</h3>
<div class="paragraph">
<p>グラフにおけるノードの中心性を評価するための一般的な指標として、その中心性（<em>betweenness centrality</em>）がある。中心点支配は、ネットワークの中心性を評価するために使用される、中心性から派生した指標である。
中心点支配の正確な定義については、<a href="https://doi.org/10.2307/3033543">Freemanの著作を</a>参照されたい。</p>
</div>
<div class="paragraph">
<p>ネットワークの中心点支配率が大きいほど、そのネットワークはより中央集権的であることを意味する。
ライトニングネットワークは、同じ大きさのランダムグラフ（Erdős-Rényiグラフ）やスケールフリーグラフ（Barabási-Albertグラフ）よりも中心点支配が大きい（すなわち、より中心化している）ことが観察される。</p>
</div>
<div class="paragraph">
<p>一般に、LNチャネルグラフの動的性質に関する理解はかなり限定的です。
マルチパート決済のようなプロトコルの変更がライトニングネットワークのダイナミクスにどのように影響するかを分析することは実りあることです。
LNグラフの時間的性質をより深く探求することは有益である。</p>
</div>
</div>
<div class="sect2">
<h3 id="_economic_incentives_and_graph_structure">経済的インセンティブとグラフ構造</h3>
<div class="paragraph">
<p>LNグラフは自発的に形成され、ノード同士は相互の関心に基づいて接続される。
その結果、インセンティブがグラフの発展を促す。
関連するインセンティブをいくつか見てみよう。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>合理的なインセンティブ</p>
<div class="ulist">
<ul>
<li>
<p>ノードは、支払いの送受信やルーティングを行うためのチャネルを確立します（手数料を獲得します）。</p>
</li>
<li>
<p>合理的に行動する2つのノード間でチャネルが確立されやすいのはなぜか？</p>
</li>
</ul>
</div>
</li>
<li>
<p>利他的なインセンティブ。</p>
<div class="ulist">
<ul>
<li>
<p>ノードは "ネットワークのために "チャンネルを確立します。</p>
</li>
<li>
<p>利他主義にセキュリティの仮定を置くべきではありませんが、ある程度は利他的な行動がビットコインを動かしています（着信接続を受け入れ、ブロックを提供する）。</p>
</li>
<li>
<p>Lightningではどのような役割を担っているのでしょうか？</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>ライトニングネットワークの初期段階において、多くのノードオペレータは、獲得したルーティングフィーが流動性のロックアップから生じる機会コストを補償していないと主張しています。これは、ノードの運用が「ネットワークのため」という利他的なインセンティブによってほとんど駆動されている可能性を示しています。
将来、ライトニングネットワークのトラフィックが大幅に増加したり、ルーティングフィーの市場が出現したりすれば、この状況は変わるかもしれません。
一方、あるノードがルーティングフィーを最適化したい場合、他のすべてのノードへの平均最短経路長を最小化することになる。
言い換えれば、利益を追求するノードはチャネルグラフの<em>中心か</em> <span class="keep-together">その</span>近くに位置しようとする。</p>
</div>
</div>
<div class="sect2">
<h3 id="_practical_advice_for_users_to_protect_their_privacy">ユーザーのプライバシーを守るための実践的なアドバイス</h3>
<div class="paragraph">
<p>ライトニング・ネットワークはまだ初期段階にあります。
この章に記載されている懸念事項の多くは、それが成熟し成長するにつれて対処される可能性があります。
一方で、悪意のあるユーザからノードを守るためにできる対策もあります。ノードが実行するデフォルトのパラメータを更新するような簡単なことで、ノードを強化するのに長い道のりを歩むことができます。</p>
</div>
</div>
<div class="sect2">
<h3 id="_unannounced_channels">未発表のチャンネル</h3>
<div class="paragraph">
<p>ライトニングネットワークを使用して、自分がコントロールするノードとウォレット間で資金を送受信するつもりで、他のユーザーの支払いをルーティングすることに興味がない場合、ネットワークの残りの部分にチャネルを発表する必要はほとんどありません。
例えば、フルノードを実行しているデスクトップPCとライトニングウォレットを実行している携帯電話の間にチャネルを開設し、<a href="#ch03_How_Lightning_Works">[ch03_How_Lightning_Works]</a>で説明したチャネル発表を単に見送ることができます。
このようなチャネルを「プライベート」チャネルと呼ぶことがありますが、厳密にはプライベートではないので、「非告知」チャネルと呼ぶ方が正しいです。</p>
</div>
<div class="paragraph">
<p>未発表チャネルはネットワークの他のノードには知られず、通常、他のユーザーの支払いをルーティングするために使用されません。
例えば、請求書に経路のヒントが含まれていて、非通知チャネルでの経路が提案されている場合です。
しかし、自分自身に対してのみ非通知チャネルを開いたと仮定すると、ある程度のプライバシーは確保されます。
自分のチャンネルをネットワークに公開していないので、自分のノードにサービス拒否攻撃が行われるリスクも低くなります。
また、このチャネルは自分のノードに直接送受信するためにのみ使用されるので、チャネルの容量をより簡単に管理できます。</p>
</div>
<div class="paragraph">
<p>また、頻繁に取引する既知の相手と予告なしにチャンネルを開設することにも利点があります。
たとえば、アリスとボブがビットコインのために頻繁にポーカーをする場合、賞金をやり取りするためのチャネルを開くことができます。
通常の場合、このチャンネルは他のユーザーからの支払いを仲介したり、手数料を徴収したりするために使われることはありません。
また、このチャンネルはネットワークの他のユーザーには知られないので、チャンネルのルーティング能力の変化を追跡しても、アリスとボブの間の支払いは推測できない。
このため、アリスとボブにはある程度のプライバシーが与えられます。しかし、どちらかが、請求書のルーティング・ヒントにチャネルを含めるなどして、他のユーザにチャネルを知らせることにした場合、このプライバシーは失われることになります。</p>
</div>
<div class="paragraph">
<p>また、予告なしのチャンネルを開設するためには、ビットコインのブロックチェーン上でパブリックトランザクションが行われなければならないことに留意する必要があります。
したがって、悪意のある者がブロックチェーン上でチャネル開設のトランザクションを監視し、ネットワーク上のチャネルと照合しようとした場合、チャネルの存在とサイズを推測することが可能である。
さらに、チャネルが閉鎖される際、ビットコインのブロックチェーンにコミットされると、チャネルの最終的な残高が公開されることになります。
ただし、オープニングとコミットメントのトランザクションは仮名なので、アリスやボブにつなげるのは簡単ではないだろう。
さらに、2021年のTaprootアップデートにより、チャンネルの開閉トランザクションと他の特定の種類のビットコイン・トランザクションを区別することが難しくなっています。
したがって、無名チャネルは完全にプライベートなものではありませんが、慎重に使用すれば、ある程度のプライバシー上の利点があります。</p>
</div>
</div>
<div class="sect2">
<h3 id="routing_considerations">ルーティングの考慮事項</h3>
<div class="paragraph">
<p>サービス<a href="#denial_of_service">拒否で</a>説明したように、パブリックチャネルを開いているノードは、そのチャネルに対する一連の攻撃のリスクに身をさらしています。
プロトコルレベルでの緩和策は開発中ですが、ノードが自分のパブリックチャネルに対するサービス拒否攻撃から保護するためにできる多くの手順があります。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">最小HTLCサイズ</dt>
<dd>
<p>チャネルオープン時に、ノードは受け入れるHTLCの最小サイズを設定することができます。
高い値を設定することで、利用可能な各チャネルスロットが非常に小さな支払いで占有されないようにします。</p>
</dd>
<dt class="hdlist1">レートリミッター</dt>
<dd>
<p>多くのノード実装では、ノードがあなたのノードを介して転送されるHTLCを動的に受け入れるか拒否することができます。
カスタムレートリミッタの有用なガイドラインは以下の通りです。</p>
<div class="ulist">
<ul>
<li>
<p>1つのピアが消費できるコミットメントスロットの数を制限します。</p>
</li>
<li>
<p>1つのピアからの故障率を監視し、その故障が急激に増加した場合にレート制限を行う。</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">シャドーチャンネル</dt>
<dd>
<p>単一のターゲットに対して大規模なチャネルを開きたいノードは、代わりにターゲットに対して単一のパブリックチャネルを開き、<a href='https://anchor.fm/tales-from-the-crypt/episodes/197-Joost-Jager-ekghn6'>シャドウチャネルと</a>呼ばれるさらなるプライベートチャネルでそれをサポートすることができます。これらのチャネルはまだルーティングに使用することができますが、潜在的な攻撃者には公表されません。</p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_accepting_channels">受付チャンネル</h4>
<div class="paragraph">
<p>現在、ライトニングノードはインバウンドの流動性をブートストラップするのに苦労しています。有償の
スワップサービス、チャネルマーケット、既知のハブからの有料チャネル開設サービスなど、インバウンド流動性を獲得するための有料ソリューションがありますが、多くのノードはインバウンド流動性を高めるために、合法的なチャネル開設要求を喜んで受け入れます。</p>
</div>
<div class="paragraph">
<p>ビットコインの文脈に戻ると、これはBitcoin Coreが、ノードが食い物にされるかもしれないという懸念から、その受信接続と送信接続を異なる方法で扱う方法と比較することができます。
ノードがあなたのビットコインノードへの着信接続を開いた場合、開始者がランダムにあなたを選択したか、悪意を持って特にあなたのノードをターゲットにしているかを知る方法がありません。
送信接続は、ノードが多くの潜在的なピアのプールからランダムに選択されたか、またはあなたが意図的に手動でピアに接続したかのいずれかであるため、このような疑いで処理する必要はありません。</p>
</div>
<div class="paragraph">
<p>Lightningでも同じことが言えます。
自分がチャンネルを開くときは意図して行いますが、遠隔の相手が自分のノードにチャンネルを開いたとき、このチャンネルが自分のノードへの攻撃に使われるかどうかは知る由もないのです。
いくつかの論文が指摘しているように、ノードをスピンアップしてターゲットにチャネルを開くコストが比較的低いことが、攻撃を容易にする大きな要因の1つとなっています。
もし受信チャンネルを受け入れるなら、受信チャンネルを受け入れるノードに何らかの制限を設けるのが賢明です。
多くの実装では、チャンネル受け入れフックを公開しており、チャンネル受け入れポリシーを好みに合わせて調整することができます。</p>
</div>
<div class="paragraph">
<p>チャンネルの受け入れと拒否の問題は、哲学的なものです。
チャンネルを開設できないため、新しいノードが参加できないライトニング・ネットワークになってしまったらどうするのでしょうか。
私たちの提案は、チャンネルを受け入れる「メガハブ」の排他的なリストを設定するのではなく、リスクの好みに合わせてチャンネルを受け入れるというものです。</p>
</div>
<div class="paragraph">
<p>考えられる戦略としては、以下のようなものがあります。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ノーリスク</dt>
<dd>
<p>受信チャンネルを受け入れない。</p>
</dd>
<dt class="hdlist1">低リスク</dt>
<dd>
<p>過去にチャンネル開設に成功した既知のノード群からのチャンネルを受け入れる。</p>
</dd>
<dt class="hdlist1">中リスク</dt>
<dd>
<p>より長い期間グラフに存在し、いくつかの長期的なチャネルを持っているノードからのチャネルのみを受け入れます。</p>
</dd>
<dt class="hdlist1">高リスク</dt>
<dd>
<p>受信チャンネルをすべて受け入れ、「<a href="#routing_considerations">ルーティングの考慮</a>事項」に記載されているミティゲーションを実施する。</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion">結論</h3>
<div class="paragraph">
<p>多くの研究者や開発者がネットワーク全体の改善を求めていますが、ネットワークに参加するすべての人が、自分のプライバシーを保護し、個々のノードレベルでセキュリティを向上させるために何ができるかを理解することが重要なのです。</p>
</div>
</div>
<div class="sect2">
<h3 id="_references_and_further_reading">参考文献と参考資料</h3>
<div class="paragraph">
<p>この章では、ライトニング・セキュリティに関する現在進行中の研究から多くの参考文献を使用しました。これらの有用な記事や論文は、トピックごとに以下のリストに掲載されています。</p>
</div>
<div class="sect4">
<h5 id="_privacy_and_probing_attacks">プライバシー攻撃とプロービング攻撃</h5>
<div class="ulist">
<ul>
<li>
<p>Jordi Herrera-Joancomartí et al.<a href="https://eprint.iacr.org/2019/328">"On the Difficulty of Hiding the Balance of Lightning Network Channels"</a>.<em>Asia CCS '19: Proceedings of the 2019 ACM Asia Conference on Computer and Communications Security</em>(July 2019): 602-612.</p>
</li>
<li>
<p>Utz Nisslmueller et al. "Toward Active and Passive Confidentiality Attacks on Cryptocurrency Off-Chain Networks." arXiv preprint,<a href="https://arxiv.org/abs/2003.00003" class="bare">https://arxiv.org/abs/2003.00003</a>(2020).</p>
</li>
<li>
<p>Sergei Tikhomirov et al. "Probing Channel Balances in Lightning Network." arXiv preprint,<a href="https://arxiv.org/abs/2004.00333" class="bare">https://arxiv.org/abs/2004.00333</a>(2020).</p>
</li>
<li>
<p>George Kapposら、"An Empirical Analysis of Privacy in Lightning Network." arXiv preprint,<a href="https://arxiv.org/abs/2003.12470" class="bare">https://arxiv.org/abs/2003.12470</a>(2021).</p>
</li>
<li>
<p><a href="https://github.com/LN-Zap/zap-desktop/blob/v0.7.2-beta/services/grpc/router.methods.js">プロービング機能でソースコードをザッピング</a>。</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_congestion_attacks">輻輳攻撃</h5>
<div class="ulist">
<ul>
<li>
<p>Ayelet Mizrahi and Aviv Zohar."Congestion Attacks in Payment Channel Networks." arXiv preprint,<a href="https://arxiv.org/abs/2002.06564" class="bare">https://arxiv.org/abs/2002.06564</a>(2020).</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_routing_considerations">ルーティングの考慮事項</h5>
<div class="ulist">
<ul>
<li>
<p>Marty Bent, interview with Joost Jager,<em>Tales from the Crypt</em>, podcast audio, October 2, 2020,<a href="https://anchor.fm/tales-from-the-crypt/episodes/197-Joost-Jager-ekghn6" class="bare">https://anchor.fm/tales-from-the-crypt/episodes/197-Joost-Jager-ekghn6.</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
最終更新 2022-10-29 15:50:16 +0400
</div>
</div>
</body>
</html>