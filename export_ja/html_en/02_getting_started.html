<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<title>Getting Started</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="getting-started">Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter, we will begin where most people start when encountering the Lightning Network for the first time&#x2014;choosing software to participate in the LN economy. We will examine the choices of two users who represent a common use case for the Lightning Network and learn by example. Alice, a coffee shop customer, will be using a Lightning wallet on her mobile device to buy coffee from Bob&#8217;s Cafe. Bob, a merchant, will be using a Lightning node and wallet to run a point-of-sale system at his cafe, so he can accept payments over the Lightning Network.</p>
</div>
<div class="sect2">
<h3 id="_alices_first_lightning_wallet">Alice&#8217;s First Lightning Wallet</h3>
<div class="paragraph">
<p>Alice is a longtime Bitcoin user. We first met Alice in Chapter 1 of <em>Mastering Bitcoin</em>,<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> when she bought a cup of coffee from Bob&#8217;s cafe using a Bitcoin transaction. If you are not yet familiar with how Bitcoin transactions work or need a refresher, please read <em>Mastering Bitcoin</em> or the summary in <a href="#bitcoin_fundamentals_review">[bitcoin_fundamentals_review]</a>.</p>
</div>
<div class="paragraph">
<p>Alice recently learned that Bob&#8217;s Cafe just started accepting LN payments! Alice is eager to learn about and experiment with the Lightning Network; she wants to be one of Bob&#8217;s first LN customers. To do this, first, Alice has to select a Lightning wallet that meets her needs.</p>
</div>
<div class="paragraph">
<p>Alice does not want to entrust custody of her bitcoin to third parties. She has learned enough about cryptocurrency to know how to use a wallet. She also wants a mobile wallet so that she can use it for small payments on the go, so she chooses the <em>Eclair</em> wallet, a popular noncustodial mobile Lightning wallet. Let&#8217;s learn more about how and why she&#8217;s made these choices.</p>
</div>
</div>
<div class="sect2">
<h3 id="_lightning_nodes">Lightning Nodes</h3>
<div class="paragraph">
<p>The Lightning Network is accessed via software applications that can speak the LN protocol. A <em>Lightning Network node</em> (LN node or simply node) is a software application that has three important characteristics. First, Lightning nodes are wallets, so they send and receive payments over the Lightning Network as well as on the Bitcoin network. Second, nodes must communicate on a peer-to-peer basis with other Lightning nodes creating the network. Finally, Lightning nodes also need access to the Bitcoin blockchain (or other blockchains for other cryptocurrencies) to secure the funds used for payments.</p>
</div>
<div class="paragraph">
<p>Users have the highest degree of control by running their own Bitcoin node and Lightning node. However, Lightning nodes can also use a lightweight Bitcoin client, commonly referred to as simplified payment verification (SPV), to interact with the Bitcoin blockchain.</p>
</div>
</div>
<div class="sect2">
<h3 id="ln_explorer">Lightning Explorers</h3>
<div class="paragraph">
<p>LN explorers are useful tools to show the statistics of nodes, channels, and network capacity.</p>
</div>
<div class="paragraph">
<p>Following is an inexhaustive list:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://1ml.com">1ML Lightning explorer</a></p>
</li>
<li>
<p><a href="https://explorer.acinq.co">ACINQ&#8217;s Lightning explorer</a>, with fancy visualization</p>
</li>
<li>
<p><a href="https://amboss.space">Amboss Space Lightning explorer</a>, with community metrics and intuitive <span class="keep-together">visualizations</span></p>
</li>
<li>
<p><a href="https://ln.bigsun.xyz">Fiatjaf&#8217;s Lightning explorer</a> with many diagrams</p>
</li>
<li>
<p><a href="https://hashxp.org/lightning/node">hashXP Lightning explorer</a></p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Note that when using Lightning explorers, just like with other block explorers, privacy can be a concern.
If users are careless, the website may track their IP addresses and collect their behavior records (for example, the nodes users are interested in).</p>
</div>
<div class="paragraph">
<p>Also, it should be noted that because there is no global consensus of the current Lightning graph or the current state of any existing channel policy, users should never rely on Lightning explorers to retrieve the most current information.
Furthermore, as users open, close, and update channels, the graph will change and individual Lightning explorers may not be up to date.
Use Lightning explorers to visualize the network or gather information, but not as an authoritative source of what is happening on the Lightning Network.
To have an authoritative view of the Lightning Network, run your own Lightning node that will build a channel graph and collect various statistics, which you can view with a web-based interface.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_lightning_wallets">Lightning Wallets</h3>
<div class="paragraph">
<p>The term <em>Lightning wallet</em> is somewhat ambiguous because it can describe a broad variety of components combined with some user interface. The most common components of Lightning wallet software include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A keystore that holds secrets, such as private keys</p>
</li>
<li>
<p>An LN node (Lightning node) that communicates on the peer-to-peer network, as described previously</p>
</li>
<li>
<p>A Bitcoin node that stores blockchain data and communicates with other Bitcoin nodes</p>
</li>
<li>
<p>A database "map" of nodes and channels that are announced on the Lightning Network</p>
</li>
<li>
<p>A channel manager that can open and close LN channels</p>
</li>
<li>
<p>A close-up system that can find a path of connected channels from payment source to payment destination</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A Lightning wallet may contain all of these functions, acting as a "full" wallet, with no reliance on any third-party services. Or one or more of these components may rely (partially or entirely) on third-party services that mediate those functions.</p>
</div>
<div class="paragraph">
<p>A <em>key</em> distinction (pun intended) is whether the keystore function is internal or outsourced. In blockchains, control of keys determines custody of funds, as memorialized by the phrase "your keys, your coins; not your keys, not your coins." Any wallet that outsources management of keys is called a <em>custodial</em> wallet because a third party acting as custodian has control of the user&#8217;s funds, not the user. A <em>noncustodial</em> or <em>self-custody</em> wallet, by comparison, is one where the keystore is part of the wallet, and keys are controlled directly by the user.  The term noncustodial wallet just implies that the keystore is local and under the user&#8217;s control. However, one or more of the other wallet components may or may not be outsourced and rely on trusted third parties.</p>
</div>
<div class="paragraph">
<p>Blockchains, especially open blockchains like Bitcoin, attempt to minimize or eliminate trust in third parties and empower users. This is often called a "trustless" model, though "trust minimized" is a better term. In such systems, the user trusts the software rules, not third parties. Therefore, the issue of control over keys is a principal consideration when choosing a Lightning wallet.</p>
</div>
<div class="paragraph">
<p>Every other component of a Lightning wallet brings similar considerations of trust. If all the components are under the control of the user, then the amount of trust in third parties is minimized, bringing maximum power to the user. Of course, this brings a direct trade-off because with that power comes the corresponding responsibility to manage complex software.</p>
</div>
<div class="paragraph">
<p>Every user must consider their own technical skills before deciding what type of Lightning wallet to use. Those with strong technical skills should use a Lightning wallet that puts all of the components under the direct control of the user. Those with fewer technical skills, but with a desire to control their funds, should choose a noncustodial Lightning wallet.
Often the trust in these cases relates to privacy.
If users decide to outsource some functionality to a third party, they usually give up some privacy as the third party will learn some information about them.</p>
</div>
<div class="paragraph">
<p>Finally, those seeking simplicity and convenience, even at the expense of control and security, may choose a custodial Lightning wallet. This is the least technically challenging option, but it <em>undermines the trust model of cryptocurrency</em> and should therefore be considered only as a stepping stone toward more control and self-reliance.</p>
</div>
<div class="paragraph">
<p>There are many ways wallets can be characterized or categorized.
The most important questions to ask about a specific wallet are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Does this Lightning wallet have a full Lightning node or does it use a third-party Lightning node?</p>
</li>
<li>
<p>Does this Lightning wallet have a full Bitcoin node or does it use a third-party Bitcoin node?</p>
</li>
<li>
<p>Does this Lightning wallet store its own keys under user control (self-custody) or are the keys held by a third-party custodian?</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>If a Lightning wallet uses a third-party Lightning node, it is this third-party Lightning node that decides how to communicate with Bitcoin. Hence, using a third-party Lightning node implies that you are also using a third-party Bitcoin node. Only when the Lightning wallet uses its own Lightning node does the choice between full Bitcoin node and third-party Bitcoin node exist.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>At the highest level of abstraction, Questions 1 and 3 are the most elementary ones.
From these two questions, we can derive four possible categories.
We can place these four categories into a quadrant, as seen in <a href="#lnwallet-categories">Lightning wallets quadrant</a>.
But remember that this is just one way of categorizing Lightning wallets.</p>
</div>
<table id="lnwallet-categories" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Lightning wallets quadrant</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"><strong>Full Lightning node</strong></th>
<th class="tableblock halign-left valign-top"><strong>Third-party Lightning node</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Self-custody</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q1: High technical skill, least trust in third parties, most permissionless</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q2: Below medium technical skills, below medium trust in third parties, requires some permissions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Custodial</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q3: Above medium technical skills, above medium trust in third parties, requires some permissions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Q4: Low technical skills, high trust in third parties, least permissionless</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Quadrant 3 (Q3), where a full Lightning node is used, but the keys are held by a custodian, is currently not common.
Future wallets from that quadrant may let a user worry about the operational aspects of their node, but then delegate access to the keys to a third party which primarily uses cold storage.</p>
</div>
<div class="paragraph">
<p>Lightning wallets can be installed on a variety of devices, including laptops, servers, and mobile devices. To run a full Lightning node, you will need to use a server or desktop computer, because mobile devices and laptops are usually not powerful enough in terms of capacity, processing, battery life, and connectivity.</p>
</div>
<div class="paragraph">
<p>The category third-party Lightning nodes can again be subdivided:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Lightweight</dt>
<dd>
<p>This means that the wallet does not operate a Lightning node and thus needs to obtain information about the Lightning Network over the internet from someone else&#8217;s Lightning node.</p>
</dd>
<dt class="hdlist1">None</dt>
<dd>
<p>This means that not only is the Lightning node operated by a third party, but most of the wallet is operated by a third party in the cloud. This is a custodial wallet where someone else controls custody of the funds.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>These subcategories are used in <a href="#lnwallet-examples">Examples of popular Lightning wallets</a>.</p>
</div>
<div class="paragraph pagebreak-before">
<p>Other terms that need explanation in <a href="#lnwallet-examples">Examples of popular Lightning wallets</a> in the column "Bitcoin node" are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Neutrino</dt>
<dd>
<p>This wallet does not operate a Bitcoin node. Instead, a Bitcoin node operated by someone else (a third party) is accessed via the Neutrino Protocol.</p>
</dd>
<dt class="hdlist1">Electrum</dt>
<dd>
<p>This wallet does not operate a Bitcoin node. Instead, a Bitcoin node operated by someone else (a third party) is accessed via the Electrum Protocol.</p>
</dd>
<dt class="hdlist1">Bitcoin Core</dt>
<dd>
<p>This is an implementation of a Bitcoin node.</p>
</dd>
<dt class="hdlist1">btcd</dt>
<dd>
<p>This is another implementation of a Bitcoin node.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>In <a href="#lnwallet-examples">Examples of popular Lightning wallets</a>, we see some examples of currently popular Lightning node and wallet applications for different types of devices. The list is sorted first by device type and then alphabetically.</p>
</div>
<table id="lnwallet-examples" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Examples of popular Lightning wallets</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Application</th>
<th class="tableblock halign-left valign-top">Device</th>
<th class="tableblock halign-left valign-top">Lightning node</th>
<th class="tableblock halign-left valign-top">Bitcoin node</th>
<th class="tableblock halign-left valign-top">Keystore</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blue Wallet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custodial</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Breez Wallet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Neutrino</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Self-custody</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eclair Mobile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lightweight</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Electrum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Self-custody</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lntxbot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custodial</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Muun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lightweight</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Neutrino</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Self-custody</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Phoenix Wallet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lightweight</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Electrum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Self-custody</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zeus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mobile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitcoin Core/btcd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Self-custody</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Electrum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desktop</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitcoin Core/Electrum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Self-custody</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zap Desktop</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desktop</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Neutrino</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Self-custody</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">c-lightning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitcoin Core</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Self-custody</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eclair Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitcoin Core/Electrum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Self-custody</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lnd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitcoin Core/btcd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Self-custody</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="testnet-bitcoin">Testnet Bitcoin</h4>
<div class="paragraph">
<p>The Bitcoin system offers an alternative chain for testing purposes called <em>testnet</em>, in contrast with the "normal" Bitcoin chain which is referred to as <em>mainnet</em>. On testnet, the currency is <em>testnet bitcoin</em> (<em>tBTC</em>), which is a worthless copy of bitcoin used exclusively for testing. Every function of Bitcoin is replicated exactly, but the money is worth nothing, so you literally have nothing to lose!</p>
</div>
<div class="paragraph">
<p>Some Lightning wallets can also operate on testnet, allowing you to make Lightning payments with testnet bitcoin, without risking real funds. This is a great way to experiment with Lightning safely. Eclair Mobile, which Alice uses in this chapter, is one example of a Lightning wallet that supports testnet operation.</p>
</div>
<div class="paragraph">
<p>You can get some tBTC to play with from a <em>testnet bitcoin faucet</em>, which gives out free tBTC on demand. Here are a few testnet faucets:</p>
</div>
<ul class="simplelist">
<li><a href="https://coinfaucet.eu/en/btc-testnet/"><em>https://coinfaucet.eu/en/btc-testnet</em></a></li>
<li><a href="https://testnet-faucet.mempool.co/"><em>https://testnet-faucet.mempool.co</em></a></li>
<li><a href="https://bitcoinfaucet.uo1.net/"><em>https://bitcoinfaucet.uo1.net</em></a></li>
<li><a href="https://testnet.help/en/btcfaucet/testnet"><em>https://testnet.help/en/btcfaucet/testnet</em></a></li>
</ul>
<div class="paragraph">
<p>All of the examples in this book can be replicated exactly on testnet with tBTC, so you can follow along if you want without risking real money.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_balancing_complexity_and_control">Balancing Complexity and Control</h3>
<div class="paragraph">
<p>Lightning wallets have to strike a careful balance between complexity and user control. Those that give the user the most control over their funds, the highest degree of privacy, and the greatest independence from third-party services are necessarily more complex and difficult to operate. As the technology advances, some of these trade-offs will become less stark, and users may be able to get more control without more complexity. However, for now, different companies and projects are exploring different positions along this control-complexity spectrum, hoping to find the "sweet spot" for the users they are targeting.</p>
</div>
<div class="paragraph">
<p>When selecting a wallet, keep in mind that even if you don&#8217;t see these trade-offs, they still exist. For example, many wallets will attempt to remove the burden of channel management from their users. To do so, they introduce central <em>hub nodes</em> that all their wallets connect to automatically. While this trade-off simplifies the user interface and user experience, it introduces a single point of failure (SPoF) as these hub nodes become indispensable for the wallet&#8217;s operation. Furthermore, relying on a "hub" like this can reduce user privacy since the hub knows the sender and potentially (if constructing the payment route on behalf of the user) also the recipient of each payment made by the user&#8217;s wallet.</p>
</div>
<div class="paragraph">
<p>In the next section, we will return to our first user and walk through her first Lightning wallet setup. She has chosen a wallet that is more sophisticated than the easier custodial wallets. This allows us to show some of the underlying complexity and introduce some of the inner workings of an advanced wallet. You may find that your first ideal wallet is oriented toward ease of use, accepting some of the control and privacy trade-offs. Or perhaps you are more of a power user and want to run your own Lightning and Bitcoin nodes as part of your wallet solution.</p>
</div>
</div>
<div class="sect2">
<h3 id="_downloading_and_installing_a_lightning_wallet">Downloading and Installing a Lightning Wallet</h3>
<div class="paragraph">
<p>When looking for a new cryptocurrency wallet, you must be very careful to select a secure source for the software.</p>
</div>
<div class="paragraph">
<p>Unfortunately, many fake wallet applications will steal your money, and some of these even find their way onto reputable and supposedly vetted software sites like the Apple and Google application stores. Whether you are installing your first or your tenth wallet, always exercise extreme caution. A rogue app may not just steal any money you entrust it with, but it might also be able to steal keys and passwords from other applications by compromising your mobile device operating system.</p>
</div>
<div class="paragraph">
<p>Alice uses an Android device and will use the Google Play Store to download and install the Eclair wallet. Searching on Google Play, she finds an entry for "Eclair Mobile," as shown in <a href="#eclair-playstore">Eclair Mobile in the Google Play Store</a>.</p>
</div>
<div id="eclair-playstore" class="imageblock">
<div class="content">
<img src="images/mtln_0201.png" alt="Eclair wallet in the Google Play Store">
</div>
<div class="title">Figure 1. Eclair Mobile in the Google Play Store</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>It is possible to experiment and test all Bitcoin-type software with zero risk (except for your own time) by using testnet bitcoins. You can also download the Eclair testnet wallet to try Lightning (on testnet) by going to the Google Play Store.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Alice notices a few different elements on this page that help her ascertain that this is, most likely, the correct "Eclair Mobile" wallet she is looking for. Firstly, the organization ACINQ<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup> is listed as the developer of this mobile wallet, which Alice knows from her research is the correct developer. Secondly, the wallet has been installed "10,000+" times and has more than 320 positive reviews. It is unlikely that this is a rogue app that has snuck into the Google Play Store. As a third step, she goes to the <a href="https://acinq.co">ACINQ website</a>. She verifies that the web page is secure by checking that the address begins with https, or prefixed by a padlock in some browsers. On the website, she goes to the Download section or looks for the link to the Google App Store. She finds the link and clicks it. She compares that this link brings her to the very same app in the Google App Store. Satisfied by these findings, Alice installs the Eclair app on her mobile device.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Always exercise great care when installing software on any device. There are many fake cryptocurrency wallets that will not only steal your money but might also compromise all other applications on your device.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_new_wallet">Creating a New Wallet</h3>
<div class="paragraph">
<p>When Alice opens the Eclair Mobile app for the first time, she is presented with a choice to "Create a New Wallet" or to "Import an Existing Wallet." Alice will create a new wallet, but let&#8217;s first discuss why these options are presented here and what it means to import an existing wallet.</p>
</div>
<div class="sect3">
<h4 id="_responsibility_with_key_custody">Responsibility with Key Custody</h4>
<div class="paragraph">
<p>As we mentioned at the beginning of this section, Eclair is a <em>noncustodial</em> wallet, meaning that Alice has sole custody of the keys used to control her bitcoin. This also means that Alice is responsible for protecting and backing up those keys. If Alice loses the keys, no one can help her recover the bitcoin, and they will be lost forever.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>With the Eclair Mobile wallet, Alice has custody and control of the keys and, therefore, full responsibility to keep the keys safe and backed up. If she loses the keys, she loses the bitcoin, and no one can help her recover from that loss!</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_mnemonic_words">Mnemonic Words</h4>
<div class="paragraph">
<p>Similar to most Bitcoin wallets, Eclair Mobile provides a <em>mnemonic phrase</em> (also sometimes called a "seed" or "seed phrase") for Alice to back up. The mnemonic phrase consists of 24 English words, selected randomly by the software and used as the basis for the keys that are generated by the wallet. Alice can use the mnemonic phrase to restore all the transactions and funds in the Eclair Mobile wallet in the case of a lost mobile device, a software bug, or memory corruption.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>The correct term for these backup words is "mnemonic phrase." We avoid the use of the term "seed" to refer to a mnemonic phrase because even though its use is common, it is incorrect.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When Alice chooses to create a new wallet, she will see a screen with her mnemonic phrase, which looks like the screenshot in <a href="#eclair-mnemonic">New wallet mnemonic phrase</a>.</p>
</div>
<div id="eclair-mnemonic" class="imageblock">
<div class="content">
<img src="images/mtln_0202.png" alt="New Wallet Mnemonic Phrase">
</div>
<div class="title">Figure 2. New wallet mnemonic phrase</div>
</div>
<div class="paragraph">
<p>In <a href="#eclair-mnemonic">New wallet mnemonic phrase</a>, we have purposely obscured part of the mnemonic phrase to prevent readers of this book from reusing the mnemonic.</p>
</div>
</div>
<div class="sect3">
<h4 id="mnemonic-storage">Storing the Mnemonic Safely</h4>
<div class="paragraph">
<p>Alice needs to be careful to store the mnemonic phrase in a way that prevents theft but also avoids accidental loss. The recommended way to properly balance these risks is to write two copies of the mnemonic phrase on paper, with each of the words numbered&#x2014;the order matters.</p>
</div>
<div class="paragraph">
<p>Once Alice has recorded the mnemonic phrase, after touching "OK GOT IT" on her screen, she will be presented with a quiz to make sure that she correctly recorded the mnemonic. The quiz will ask for three or four of the words at random. Alice isn&#8217;t expecting a quiz, but since she recorded the mnemonic correctly, she passes without any difficulty.</p>
</div>
<div class="paragraph">
<p>Once Alice has recorded the mnemonic phrase and passed the quiz, she should store each copy in a separate secure location, such as a locked desk drawer or a fireproof safe.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Never attempt a "DIY" security scheme that deviates in any way from the best practice recommendation in <a href="#mnemonic-storage">Storing the Mnemonic Safely</a>. Do not cut your mnemonic in half, make screenshots, store it on USB drives or cloud drives, encrypt it, or try any other nonstandard method. You will tip the balance in such a way as to risk permanent loss. Many people have lost funds, not from theft, but because they tried a nonstandard solution without having the expertise to balance the risks involved. The best practice recommendation is carefully considered by experts and suitable for the vast majority of users.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After Alice initializes her Eclair Mobile wallet, she will see a brief tutorial that highlights the various elements of the user interface. We won&#8217;t replicate the tutorial here, but we will explore all of those elements as we follow Alice&#8217;s attempt to buy a cup of coffee!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_loading_bitcoin_onto_the_wallet">Loading Bitcoin onto the Wallet</h3>
<div class="paragraph">
<p>Alice now has a Lightning wallet. But it&#8217;s empty! She now faces one of the more challenging aspects of this experiment: she has to find a way to acquire some bitcoin and load it onto her Eclair wallet.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>If Alice already has bitcoin in another wallet, she could choose to send that bitcoin to her Eclair wallet instead of acquiring new bitcoin to load onto her new wallet.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="acquiring-bitcoin">Acquiring Bitcoin</h4>
<div class="paragraph">
<p>There are several ways Alice can acquire bitcoin:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>She can exchange some of her national currency (e.g., USD) on a cryptocurrency exchange.</p>
</li>
<li>
<p>She can buy some from a friend, or an acquaintance from a Bitcoin meetup, in exchange for cash.</p>
</li>
<li>
<p>She can find a <em>Bitcoin ATM</em> in her area, which acts as a vending machine, selling bitcoin for cash.</p>
</li>
<li>
<p>She can offer her skills or a product she sells and accept payment in bitcoin.</p>
</li>
<li>
<p>She can ask her employer or clients to pay her in bitcoin.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All of these methods have varying degrees of difficulty, and many will involve paying a fee. Some will also require Alice to provide identification documents to comply with local banking regulations. However, with all these methods, Alice will be able to receive bitcoin.</p>
</div>
</div>
<div class="sect3">
<h4 id="_receiving_bitcoin">Receiving Bitcoin</h4>
<div class="paragraph">
<p>Let&#8217;s assume Alice has found a local Bitcoin ATM and has decided to buy some bitcoin in exchange for cash. An example of a Bitcoin ATM, one built by the Lamassu Company, is shown in <a href="#bitcoin-atm">A Lamassu Bitcoin ATM</a>. Such Bitcoin ATMs accept national currency (cash) through a cash slot and send bitcoin to a Bitcoin address scanned from a user&#8217;s wallet using a built-in camera.</p>
</div>
<div id="bitcoin-atm" class="imageblock">
<div class="content">
<img src="images/mtln_0203.png" alt="Lamassu Bitcoin ATM">
</div>
<div class="title">Figure 3. A Lamassu Bitcoin ATM</div>
</div>
<div class="paragraph">
<p>To receive the bitcoin in her Eclair Lightning wallet, Alice will need to present a Bitcoin address from the Eclair Lightning wallet to the ATM. The ATM can then send Alice&#8217;s newly acquired bitcoin to this Bitcoin address.</p>
</div>
<div class="paragraph">
<p>To see a Bitcoin address on the Eclair wallet, Alice must swipe to the left column titled YOUR BITCOIN ADDRESS (see <a href="#eclair-receive">Alice&#8217;s bitcoin address, shown in Eclair</a>), where she will see a square barcode (called a <em>QR code</em>) and a string of letters and numbers below that.</p>
</div>
<div class="paragraph">
<p>The QR code contains the same string of letters and numbers shown below it, in an easy to scan format. This way, Alice doesn&#8217;t have to type the Bitcoin address. In the screenshot (<a href="#eclair-receive">Alice&#8217;s bitcoin address, shown in Eclair</a>), we have purposely blurred both, to prevent readers from inadvertently sending bitcoin to this address.</p>
</div>
<div id="eclair-receive" class="imageblock">
<div class="content">
<img src="images/mtln_0204.png" alt="Eclair bitcoin address QR code">
</div>
<div class="title">Figure 4. Alice&#8217;s bitcoin address, shown in Eclair</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Both Bitcoin addresses and QR codes contain error detection information that prevents any typing or scanning errors from producing a "wrong" Bitcoin address. If there is a mistake in the address, any Bitcoin wallet will notice the error and refuse to accept the Bitcoin address as valid.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph pagebreak-before">
<p>Alice can take her mobile device to the ATM and show it to the built-in camera, as shown in <a href="#bitcoin-atm-receive">Bitcoin ATM scans the QR code</a>. After inserting some cash into the slot, she will receive bitcoin in Eclair!</p>
</div>
<div id="bitcoin-atm-receive" class="imageblock">
<div class="content">
<img src="images/mtln_0205.png" alt="Bitcoin ATM scans the QR code">
</div>
<div class="title">Figure 5. Bitcoin ATM scans the QR code</div>
</div>
<div class="paragraph">
<p>Alice will see the transaction from the ATM in the TRANSACTION HISTORY tab of the Eclair wallet. Although Eclair will detect the bitcoin transaction in just a few seconds, it will take approximately one hour for the bitcoin transaction to be "confirmed" on the Bitcoin blockchain. As you can see in <a href="#eclair-tx1">Alice receives bitcoin</a>, Alice&#8217;s Eclair wallet shows "6+ conf" below the transaction, indicating that the transaction has received the required minimum of six confirmations, and her funds are now ready to use.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>The number of confirmations on a transaction is the number of blocks mined since (and inclusive of) the block that contained that transaction. Six confirmations is best practice, but different Lightning wallets can consider a channel open after any number of confirmations. Some wallets even scale up the number of expected confirmations by the monetary value of the channel.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Although in this example Alice used an ATM to acquire her first bitcoin, the same basic concepts would apply even if she used one of the other methods in <a href="#acquiring-bitcoin">Acquiring Bitcoin</a>. For example, if Alice wanted to sell a product or provide a professional service in exchange for bitcoin, her customers could scan the Bitcoin address with their wallets and pay her in bitcoin.</p>
</div>
<div id="eclair-tx1" class="imageblock">
<div class="content">
<img src="images/mtln_0206.png" alt="Bitcoin transaction received">
</div>
<div class="title">Figure 6. Alice receives bitcoin</div>
</div>
<div class="paragraph">
<p>Similarly, if she billed a client for a service offered over the internet, Alice could send an email or instant message with the Bitcoin address or the QR code to her client, and they could paste or scan the information into a Bitcoin wallet to pay her.</p>
</div>
<div class="paragraph">
<p>Alice could even print the QR code and affix it to a sign and display it publicly to receive tips. For example, she could have a QR code affixed to her guitar and receive tips while performing on the street!<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup></p>
</div>
<div class="paragraph">
<p>Finally, if Alice bought bitcoin from a cryptocurrency exchange, she could (and should) "withdraw" the bitcoin by pasting her Bitcoin address into the exchange website. The exchange will then send the bitcoin to her address directly.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_from_bitcoin_to_lightning_network">From Bitcoin to Lightning Network</h3>
<div class="paragraph">
<p>Alice&#8217;s bitcoin is now controlled by her Eclair wallet and has been recorded on the Bitcoin blockchain. At this point, Alice&#8217;s bitcoin is <em>on-chain</em>, meaning that the transaction has been broadcast to the entire Bitcoin network, verified by all Bitcoin nodes, and <em>mined</em> (recorded) onto the Bitcoin blockchain.</p>
</div>
<div class="paragraph">
<p>So far, the Eclair Mobile wallet has behaved only as a Bitcoin wallet, and Alice hasn&#8217;t used the Lightning Network features of Eclair. As is the case with many Lightning wallets, Eclair bridges Bitcoin and the Lightning Network by acting as both a Bitcoin wallet and a Lightning wallet.</p>
</div>
<div class="paragraph">
<p>Now, Alice is ready to start using the Lightning Network by taking her bitcoin off-chain to take advantage of the fast, cheap, and private payments that the Lightning Network offers.</p>
</div>
<div class="sect3">
<h4 id="_lightning_network_channels">Lightning Network Channels</h4>
<div class="paragraph">
<p>Swiping right, Alice accesses the LIGHTNING CHANNELS section of Eclair. Here she can manage the channels that will connect her wallet to the Lightning Network.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s review the definition of an LN channel at this point, to make things a bit clearer. Firstly, the word "channel" is a metaphor for a <em>financial relationship</em> between Alice&#8217;s Lightning wallet and another Lightning wallet. We call it a channel because it is a means for Alice&#8217;s wallet and this other wallet to exchange many payments with each other on the Lightning Network (off-chain) without committing transactions to the Bitcoin blockchain (on-chain).</p>
</div>
<div class="paragraph">
<p>The wallet or <em>node</em> that Alice opens a channel to is called her <em>channel peer</em>. Once "opened," a channel can be used to send many payments back and forth between Alice&#8217;s wallet and her channel peer.</p>
</div>
<div class="paragraph">
<p>Furthermore, Alice&#8217;s channel peer can <em>forward</em> payments via other channels further into the Lightning Network. This way, Alice can <em>route</em> a payment to any wallet (e.g., Bob&#8217;s Lightning wallet) as long as Alice&#8217;s wallet can find a viable <em>path</em> made by hopping from channel to channel, all the way to Bob&#8217;s wallet.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Not all channel peers are <em>good</em> peers for routing payments. Well-connected peers will be able to route payments over shorter paths to the destination, increasing the chance of success. Channel peers with ample funds will be able to route larger payments.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In other words, Alice needs one or more channels that connect her to one or more other nodes on the Lightning Network. She doesn&#8217;t need a channel to connect her wallet directly to Bob&#8217;s Cafe in order to send Bob a payment, though she can choose to open a direct channel, too. Any node in the Lightning Network can be used for Alice&#8217;s first channel. The more well-connected a node is, the more people Alice can reach. In this example, since we want to also demonstrate payment routing, we won&#8217;t have Alice open a channel directly to Bob&#8217;s wallet. Instead, we will have Alice open a channel to a well-connected node and then later use that node to forward her payment, routing it through any other nodes as necessary to reach Bob.</p>
</div>
<div class="paragraph">
<p>At first, there are no open channels, so as we see in <a href="#eclair-channels">LIGHTNING CHANNELS tab</a>, the LIGHTNING CHANNELS tab displays an empty list. If you notice, in the bottom-right corner there is a plus symbol (+), which is a button to open a new channel.</p>
</div>
<div id="eclair-channels" class="imageblock">
<div class="content">
<img src="images/mtln_0207.png" alt="LIGHTNING CHANNELS tab">
</div>
<div class="title">Figure 7. LIGHTNING CHANNELS tab</div>
</div>
<div class="paragraph pagebreak-before">
<p>Alice presses the plus symbol and is presented with four possible ways to open a channel:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Paste a node URI</p>
</li>
<li>
<p>Scan a node URI</p>
</li>
<li>
<p>Random node</p>
</li>
<li>
<p>ACINQ node</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A "node URI" is a Universal Resource Identifier (URI) that identifies a specific Lightning node. Alice can either paste such a URI from her clipboard or scan a QR code containing that same information. An example of a node URI is shown as a QR code in <a href="#node-URI-QR">Node URI as a QR code</a> and then as a text string.</p>
</div>
<div id="node-URI-QR" class="imageblock">
<div class="content">
<img src="images/mtln_0208.png" alt="Lightning node URI QR code" width="120">
</div>
<div class="title">Figure 8. Node URI as a QR code</div>
</div>
<div id="node-URI-example" class="listingblock">
<div class="title">node URI</div>
<div class="content">
<pre>0237fefbe8626bf888de0cad8c73630e32746a22a2c4faa91c1d9877a3826e1174@1.ln.aantonop.com:9735</pre>
</div>
</div>
<div class="paragraph">
<p>While Alice could select a specific Lightning node, or use the "Random node" option to have the Eclair wallet select a node at random, she will select the ACINQ Node option to connect to one of ACINQ&#8217;s well-connected Lightning nodes.</p>
</div>
<div class="paragraph">
<p>Choosing the ACINQ node will slightly reduce Alice&#8217;s privacy, because it will give ACINQ the ability to see all of Alice&#8217;s transactions. It will also create a single point of failure, since Alice will only have one channel, and if the ACINQ node is not available, Alice will not be able to make payments. To keep things simple at first, we will accept these trade-offs. In subsequent chapters, we will gradually learn how to gain more independence and make fewer trade-offs!</p>
</div>
<div class="paragraph">
<p>Alice selects ACINQ Node and is ready to open her first channel on the Lightning Network.</p>
</div>
</div>
<div class="sect3">
<h4 id="_opening_a_lightning_channel">Opening a Lightning Channel</h4>
<div class="paragraph">
<p>When Alice selects a node to open a new channel, she is asked to select how much bitcoin she wants to allocate to this channel. In subsequent chapters, we will discuss the implications of these choices, but for now, Alice will allocate almost all her funds to the channel. Since she will have to pay transaction fees to open the channel, she will select an amount slightly less than her total balance.<sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup></p>
</div>
<div class="paragraph">
<p>Alice allocates 0.018 BTC of her 0.020 BTC total to her channel and accepts the default fee rate, as shown in <a href="#eclair-open-channel">Opening a Lightning channel</a>.</p>
</div>
<div id="eclair-open-channel" class="imageblock">
<div class="content">
<img src="images/mtln_0209.png" alt="Opening a Lightning Channel">
</div>
<div class="title">Figure 9. Opening a Lightning channel</div>
</div>
<div class="paragraph">
<p>Once she clicks OPEN, her wallet constructs the special Bitcoin transaction that opens a Lightning channel, known as the <em>funding transaction</em>. The on-chain funding transaction is sent to the Bitcoin network for confirmation.</p>
</div>
<div class="paragraph">
<p>Alice now has to wait again (see <a href="#eclair-channel-waiting">Waiting for the funding transaction to open the channel</a>) for the transaction to be recorded on the Bitcoin blockchain. As with the initial Bitcoin transaction that she used to acquire her bitcoin, she has to wait for six or more confirmations (approximately one hour).</p>
</div>
<div id="eclair-channel-waiting" class="imageblock">
<div class="content">
<img src="images/mtln_0210.png" alt="Waiting for the Funding Transaction to Open the Channel">
</div>
<div class="title">Figure 10. Waiting for the funding transaction to open the channel</div>
</div>
<div class="paragraph">
<p>Once the funding transaction is confirmed, Alice&#8217;s channel to the ACINQ node is open, funded, and ready, as shown in <a href="#eclair-channel-open">Channel is open</a>.</p>
</div>
<div id="eclair-channel-open" class="imageblock">
<div class="content">
<img src="images/mtln_0211.png" alt="Channel is Open">
</div>
<div class="title">Figure 11. Channel is open</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Did you notice that the channel amount seems to have changed? It hasn&#8217;t: the channel contains 0.018 BTC, but in the time between screenshots, the BTC exchange rate changed, so the USD value is different. You can choose to show balances in BTC or USD, but keep in mind that USD values are calculated in real time and will change!</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_buying_a_cup_of_coffee_using_the_lightning_network">Buying a Cup of Coffee Using the Lightning Network</h3>
<div class="paragraph">
<p>Alice now has everything ready to start using the Lightning Network. As you can see, it took a bit of work and a bit of time waiting for confirmations. However, now subsequent actions are fast and easy. The Lightning Network enables payments without having to wait for confirmations, as funds get settled in seconds.</p>
</div>
<div class="paragraph">
<p>Alice grabs her mobile device and runs to Bob&#8217;s Cafe in her neighborhood. She is excited to try her new Lightning wallet and use it to buy something!</p>
</div>
<div class="sect3">
<h4 id="_bobs_cafe">Bob&#8217;s Cafe</h4>
<div class="paragraph">
<p>Bob has a simple point-of-sale (PoS) application for the use of any customer who wants to pay with bitcoin over the Lightning Network. As we will see in the next chapter, Bob uses the popular open source platform <em>BTCPay Server</em> which contains all the necessary components for an ecommerce or retail solution, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A Bitcoin node using the Bitcoin Core software</p>
</li>
<li>
<p>A Lightning node using the c-lightning software</p>
</li>
<li>
<p>A simple PoS application for a tablet</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>BTCPay Server makes it simple to install all the necessary software, upload pictures and product prices, and launch a store quickly.</p>
</div>
<div class="paragraph">
<p>On the counter at Bob&#8217;s Cafe, there is a tablet device showing what you see in <a href="#bob-cafe-posapp">Bob&#8217;s point-of-sale application</a>.</p>
</div>
<div id="bob-cafe-posapp" class="imageblock">
<div class="content">
<img src="images/mtln_0212.png" alt="Bob&#8217;s Point-of-Sale Application">
</div>
<div class="title">Figure 12. Bob&#8217;s point-of-sale application</div>
</div>
</div>
<div class="sect3">
<h4 id="_a_lightning_invoice">A Lightning Invoice</h4>
<div class="paragraph">
<p>Alice selects the Cafe Latte option from the screen and is presented with a <em>Lightning invoice</em> (also known as a "payment request"), as shown in <a href="#bob-cafe-invoice">Lightning invoice for Alice&#8217;s latte</a>.</p>
</div>
<div id="bob-cafe-invoice" class="imageblock">
<div class="content">
<img src="images/mtln_0213.png" alt="BTCPay Server Lightning invoice">
</div>
<div class="title">Figure 13. Lightning invoice for Alice&#8217;s latte</div>
</div>
<div class="paragraph pagebreak-before">
<p>To pay the invoice, Alice opens her Eclair wallet and selects the Send button (which looks like an up-facing arrow) under the TRANSACTION HISTORY tab, as shown in <a href="#alice-send-start">Alice selecting Send</a>.</p>
</div>
<div id="alice-send-start" class="imageblock">
<div class="content">
<img src="images/mtln_0214.png" alt="Lightning transaction send" width="300">
</div>
<div class="title">Figure 14. Alice selecting Send</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>The term "payment request" can refer to a Bitcoin payment request or a Lightning invoice, and the terms "invoice" and "payment request" are often used interchangeably. The correct technical term is "Lightning invoice," regardless of how it is named in the wallet.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Alice selects the option to "scan a payment request," scans the QR code displayed on the screen of the tablet (see <a href="#bob-cafe-invoice">Lightning invoice for Alice&#8217;s latte</a>), and is prompted to confirm her payment, as shown in <a href="#alice-send-detail">Alice&#8217;s send confirmation</a>.</p>
</div>
<div class="paragraph">
<p>Alice presses PAY, and a second later, Bob&#8217;s tablet shows a successful payment. Alice has completed her first LN payment! It was fast, inexpensive, and easy. Now she can enjoy her latte which was purchased using bitcoin through a payment system that is fast, cheap, and decentralized. From now on, Alice can simply select an item on Bob&#8217;s tablet screen, scan the QR code with her cell phone, click PAY, and be served a coffee, all within seconds and all without an on-chain transaction.</p>
</div>
<div id="alice-send-detail" class="imageblock">
<div class="content">
<img src="images/mtln_0215.png" alt="Lightning transaction send confirmation" width="300">
</div>
<div class="title">Figure 15. Alice&#8217;s send confirmation</div>
</div>
<div class="paragraph">
<p>Lightning payments are better for Bob, too. He&#8217;s confident that he will be paid for Alice&#8217;s latte without waiting for an on-chain confirmation. In the future, whenever Alice feels like drinking a coffee at Bob&#8217;s Cafe, she can choose to pay with bitcoin on the Bitcoin network or the Lightning Network. Which one do you think she will choose?</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion">Conclusion</h3>
<div class="paragraph">
<p>In this chapter, we followed Alice as she downloaded and installed her first Lightning wallet, acquired and transferred some bitcoin, opened her first Lightning channel, and bought a cup of coffee by making her first payment on the Lightning Network. In the following chapters, we will look "under the covers" at how each component in the Lightning Network works and how Alice&#8217;s payment reached Bob&#8217;s Cafe.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Andreas M. Antonopoulos, <em>Mastering Bitcoin</em>, 2nd Edition, <a href="https://github.com/bitcoinbook/bitcoinbook/blob/develop/ch01.asciidoc">Chapter 1</a> (O&#8217;Reilly)
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. ACINQ: Developers of the Eclair Mobile Lightning wallet.
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. It is generally not advisable to reuse the same Bitcoin address for multiple payments because all Bitcoin transactions are public. A nosy person passing by could scan Alice&#8217;s QR code and see how many tips Alice has already received to this address on the Bitcoin blockchain. Fortunately, the Lightning Network offers more private solutions to this, discussed later in the book!
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. The Eclair wallet doesn&#8217;t offer an option to automatically calculate the necessary fees and allocate the maximum amount of funds to a channel, so Alice has to calculate this herself.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-10-29 15:50:16 +0400
</div>
</div>
</body>
</html>